<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>01. vite | toxicDocs</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/toxicDocs/awa.jpg">
    <meta name="description" content="  ">
    <meta name="referrer" content="no-referrer">
    
    <link rel="preload" href="/toxicDocs/assets/css/0.styles.aeb0f387.css" as="style"><link rel="preload" href="/toxicDocs/assets/js/app.57a67b61.js" as="script"><link rel="preload" href="/toxicDocs/assets/js/3.38eb45c0.js" as="script"><link rel="preload" href="/toxicDocs/assets/js/1.eb5625cb.js" as="script"><link rel="preload" href="/toxicDocs/assets/js/80.3e28bff5.js" as="script"><link rel="prefetch" href="/toxicDocs/assets/js/10.2f38544c.js"><link rel="prefetch" href="/toxicDocs/assets/js/11.d980741a.js"><link rel="prefetch" href="/toxicDocs/assets/js/12.8d120472.js"><link rel="prefetch" href="/toxicDocs/assets/js/13.99a15f62.js"><link rel="prefetch" href="/toxicDocs/assets/js/14.012526be.js"><link rel="prefetch" href="/toxicDocs/assets/js/15.93c9f0b0.js"><link rel="prefetch" href="/toxicDocs/assets/js/16.fdf462c3.js"><link rel="prefetch" href="/toxicDocs/assets/js/17.6b897f4a.js"><link rel="prefetch" href="/toxicDocs/assets/js/18.e6bb1412.js"><link rel="prefetch" href="/toxicDocs/assets/js/19.28e235f5.js"><link rel="prefetch" href="/toxicDocs/assets/js/20.a6d64190.js"><link rel="prefetch" href="/toxicDocs/assets/js/21.cd460109.js"><link rel="prefetch" href="/toxicDocs/assets/js/22.e2928974.js"><link rel="prefetch" href="/toxicDocs/assets/js/23.d7217fb6.js"><link rel="prefetch" href="/toxicDocs/assets/js/24.e6f9072e.js"><link rel="prefetch" href="/toxicDocs/assets/js/25.0dd4caed.js"><link rel="prefetch" href="/toxicDocs/assets/js/26.10d4eabe.js"><link rel="prefetch" href="/toxicDocs/assets/js/27.e55db4be.js"><link rel="prefetch" href="/toxicDocs/assets/js/28.e62830f4.js"><link rel="prefetch" href="/toxicDocs/assets/js/29.04cc29ea.js"><link rel="prefetch" href="/toxicDocs/assets/js/30.a041c9eb.js"><link rel="prefetch" href="/toxicDocs/assets/js/31.896142db.js"><link rel="prefetch" href="/toxicDocs/assets/js/32.9506dd06.js"><link rel="prefetch" href="/toxicDocs/assets/js/33.c7a1c1ce.js"><link rel="prefetch" href="/toxicDocs/assets/js/34.94330620.js"><link rel="prefetch" href="/toxicDocs/assets/js/35.7a14c7b2.js"><link rel="prefetch" href="/toxicDocs/assets/js/36.ec763fd2.js"><link rel="prefetch" href="/toxicDocs/assets/js/37.14c00b36.js"><link rel="prefetch" href="/toxicDocs/assets/js/38.988ef3eb.js"><link rel="prefetch" href="/toxicDocs/assets/js/39.faae47c5.js"><link rel="prefetch" href="/toxicDocs/assets/js/4.7bb9ec6b.js"><link rel="prefetch" href="/toxicDocs/assets/js/40.23bfa2cb.js"><link rel="prefetch" href="/toxicDocs/assets/js/41.683fdc39.js"><link rel="prefetch" href="/toxicDocs/assets/js/42.d908406e.js"><link rel="prefetch" href="/toxicDocs/assets/js/43.00b23b2c.js"><link rel="prefetch" href="/toxicDocs/assets/js/44.8e7e035e.js"><link rel="prefetch" href="/toxicDocs/assets/js/45.6c60b62b.js"><link rel="prefetch" href="/toxicDocs/assets/js/46.43a17a5b.js"><link rel="prefetch" href="/toxicDocs/assets/js/47.b1f87e3d.js"><link rel="prefetch" href="/toxicDocs/assets/js/48.27e9d521.js"><link rel="prefetch" href="/toxicDocs/assets/js/49.a87e6049.js"><link rel="prefetch" href="/toxicDocs/assets/js/5.42cea8f5.js"><link rel="prefetch" href="/toxicDocs/assets/js/50.3f845486.js"><link rel="prefetch" href="/toxicDocs/assets/js/51.aad4770d.js"><link rel="prefetch" href="/toxicDocs/assets/js/52.b5aee4d6.js"><link rel="prefetch" href="/toxicDocs/assets/js/53.7d1b20b5.js"><link rel="prefetch" href="/toxicDocs/assets/js/54.36c7ffbb.js"><link rel="prefetch" href="/toxicDocs/assets/js/55.aa1925a2.js"><link rel="prefetch" href="/toxicDocs/assets/js/56.5b73f487.js"><link rel="prefetch" href="/toxicDocs/assets/js/57.8aaf393f.js"><link rel="prefetch" href="/toxicDocs/assets/js/58.7206a865.js"><link rel="prefetch" href="/toxicDocs/assets/js/59.995c60aa.js"><link rel="prefetch" href="/toxicDocs/assets/js/6.44f91839.js"><link rel="prefetch" href="/toxicDocs/assets/js/60.9d75e7d3.js"><link rel="prefetch" href="/toxicDocs/assets/js/61.0437caac.js"><link rel="prefetch" href="/toxicDocs/assets/js/62.d5e379f6.js"><link rel="prefetch" href="/toxicDocs/assets/js/63.df830a4e.js"><link rel="prefetch" href="/toxicDocs/assets/js/64.c0347713.js"><link rel="prefetch" href="/toxicDocs/assets/js/65.f739dbae.js"><link rel="prefetch" href="/toxicDocs/assets/js/66.4e4ee166.js"><link rel="prefetch" href="/toxicDocs/assets/js/67.2354d32b.js"><link rel="prefetch" href="/toxicDocs/assets/js/68.6592aae5.js"><link rel="prefetch" href="/toxicDocs/assets/js/69.20cb4424.js"><link rel="prefetch" href="/toxicDocs/assets/js/7.50e8f11a.js"><link rel="prefetch" href="/toxicDocs/assets/js/70.25741af2.js"><link rel="prefetch" href="/toxicDocs/assets/js/71.966e9723.js"><link rel="prefetch" href="/toxicDocs/assets/js/72.6b0b893a.js"><link rel="prefetch" href="/toxicDocs/assets/js/73.26549001.js"><link rel="prefetch" href="/toxicDocs/assets/js/74.f0c3f927.js"><link rel="prefetch" href="/toxicDocs/assets/js/75.95abd215.js"><link rel="prefetch" href="/toxicDocs/assets/js/76.40ab8ae7.js"><link rel="prefetch" href="/toxicDocs/assets/js/77.eb5ad441.js"><link rel="prefetch" href="/toxicDocs/assets/js/78.136d9557.js"><link rel="prefetch" href="/toxicDocs/assets/js/79.22c9557f.js"><link rel="prefetch" href="/toxicDocs/assets/js/8.fe737a6b.js"><link rel="prefetch" href="/toxicDocs/assets/js/81.9c7636a5.js"><link rel="prefetch" href="/toxicDocs/assets/js/82.762018d5.js"><link rel="prefetch" href="/toxicDocs/assets/js/83.dc334460.js"><link rel="prefetch" href="/toxicDocs/assets/js/84.662cd3b9.js"><link rel="prefetch" href="/toxicDocs/assets/js/9.6597a9e8.js">
    <link rel="stylesheet" href="/toxicDocs/assets/css/0.styles.aeb0f387.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-6f8f7dda><div data-v-6f8f7dda><div class="password-shadow password-wrapper-out" style="display:none;" data-v-f68096de data-v-6f8f7dda data-v-6f8f7dda><h3 class="title" data-v-f68096de>toxicDocs</h3> <p class="description" data-v-f68096de>  </p> <label id="box" class="inputBox" data-v-f68096de><input type="password" value="" data-v-f68096de> <span data-v-f68096de>Konck! Knock!</span> <button data-v-f68096de>OK</button></label> <div class="footer" data-v-f68096de><span data-v-f68096de><i class="iconfont reco-theme" data-v-f68096de></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-f68096de>vuePress-theme-reco</a></span> <span data-v-f68096de><i class="iconfont reco-copyright" data-v-f68096de></i> <a data-v-f68096de><span data-v-f68096de>toxic</span>
        Â Â 
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-6f8f7dda><header class="navbar" data-v-6f8f7dda><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/toxicDocs/" class="home-link router-link-active"><img src="/toxicDocs/7.jpg" alt="toxicDocs" class="logo"> <span class="site-name">toxicDocs</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/toxicDocs/" class="nav-link"><i class="iconfont reco-home"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      ç›®å½•ç´¢å¼•
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/ç®—æ³•/" class="nav-link"><i class="undefined"></i>
  ç®—æ³•
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/é¡¹ç›®/" class="nav-link"><i class="undefined"></i>
  é¡¹ç›®
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/å‰ç«¯/" class="nav-link"><i class="undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/é¢è¯•/" class="nav-link"><i class="undefined"></i>
  é¢è¯•
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/å°ç¨‹åº/" class="nav-link"><i class="undefined"></i>
  å°ç¨‹åº
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/æºç /" class="nav-link"><i class="undefined"></i>
  æºç 
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/Graduation/" class="nav-link"><i class="undefined"></i>
  Graduation
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/æ•™ç¨‹/" class="nav-link"><i class="undefined"></i>
  æ•™ç¨‹
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/other/" class="nav-link"><i class="undefined"></i>
  other
</a></li></ul></div></div><div class="nav-item"><a href="/toxicDocs/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  æ ‡ç­¾ç´¢å¼•
</a></div><div class="nav-item"><a href="/toxicDocs/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´çº¿
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-6f8f7dda></div> <aside class="sidebar" data-v-6f8f7dda><div class="personal-info-wrapper" data-v-cc06b9e8 data-v-6f8f7dda><img src="/toxicDocs/awa.jpg" alt="author-avatar" class="personal-img" data-v-cc06b9e8> <h3 class="name" data-v-cc06b9e8>
    toxic
  </h3> <div class="num" data-v-cc06b9e8><div data-v-cc06b9e8><h3 data-v-cc06b9e8>63</h3> <h6 data-v-cc06b9e8>Articles</h6></div> <div data-v-cc06b9e8><h3 data-v-cc06b9e8>17</h3> <h6 data-v-cc06b9e8>Tags</h6></div></div> <ul class="social-links" data-v-cc06b9e8></ul> <hr data-v-cc06b9e8></div> <nav class="nav-links"><div class="nav-item"><a href="/toxicDocs/" class="nav-link"><i class="iconfont reco-home"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      ç›®å½•ç´¢å¼•
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/ç®—æ³•/" class="nav-link"><i class="undefined"></i>
  ç®—æ³•
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/é¡¹ç›®/" class="nav-link"><i class="undefined"></i>
  é¡¹ç›®
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/å‰ç«¯/" class="nav-link"><i class="undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/é¢è¯•/" class="nav-link"><i class="undefined"></i>
  é¢è¯•
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/å°ç¨‹åº/" class="nav-link"><i class="undefined"></i>
  å°ç¨‹åº
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/æºç /" class="nav-link"><i class="undefined"></i>
  æºç 
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/Graduation/" class="nav-link"><i class="undefined"></i>
  Graduation
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/æ•™ç¨‹/" class="nav-link"><i class="undefined"></i>
  æ•™ç¨‹
</a></li><li class="dropdown-item"><!----> <a href="/toxicDocs/categories/other/" class="nav-link"><i class="undefined"></i>
  other
</a></li></ul></div></div><div class="nav-item"><a href="/toxicDocs/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  æ ‡ç­¾ç´¢å¼•
</a></div><div class="nav-item"><a href="/toxicDocs/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´çº¿
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/toxicDocs/toxicBlogs/vue/ts1.html" class="sidebar-link">typescriptç±»å‹</a></li><li><a href="/toxicDocs/toxicBlogs/vue/ts2.html" class="sidebar-link">typescriptç»§æ‰¿</a></li><li><a href="/toxicDocs/toxicBlogs/vue/ts3.html" class="sidebar-link">typescripté¡¹ç›®</a></li><li><a href="/toxicDocs/toxicBlogs/vue/ts4.html" class="sidebar-link">å‘å¸ƒè®¢é˜…è€…æ¨¡å¼</a></li><li><a href="/toxicDocs/toxicBlogs/vue/vite.html" aria-current="page" class="active sidebar-link">01. vite</a></li><li><a href="/toxicDocs/toxicBlogs/vue/vue1.html" class="sidebar-link">01. vue2è„šæ‰‹æ¶</a></li><li><a href="/toxicDocs/toxicBlogs/vue/vue2.html" class="sidebar-link">02. vue2ç»„ä»¶</a></li><li><a href="/toxicDocs/toxicBlogs/vue/vue3.html" class="sidebar-link">03. vue2ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="/toxicDocs/toxicBlogs/vue/vuex1.html" class="sidebar-link">04. VueX</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-f68096de data-v-6f8f7dda><h3 class="title" data-v-f68096de>01. vite</h3> <!----> <label id="box" class="inputBox" data-v-f68096de><input type="password" value="" data-v-f68096de> <span data-v-f68096de>Konck! Knock!</span> <button data-v-f68096de>OK</button></label> <div class="footer" data-v-f68096de><span data-v-f68096de><i class="iconfont reco-theme" data-v-f68096de></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-f68096de>vuePress-theme-reco</a></span> <span data-v-f68096de><i class="iconfont reco-copyright" data-v-f68096de></i> <a data-v-f68096de><span data-v-f68096de>toxic</span>
        Â Â 
        <!---->
        2024
      </a></span></div></div> <div data-v-6f8f7dda><div data-v-6f8f7dda><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">01. vite</h1> <div data-v-1e62957f><i class="iconfont reco-account" data-v-1e62957f><span data-v-1e62957f>toxic</span></i> <i class="iconfont reco-date" data-v-1e62957f><span data-v-1e62957f>12/8/2023</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1e62957f><span class="tag-item" data-v-1e62957f>vue</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="_1-vue3åŸºæœ¬æ¦‚å¿µ"><a href="#_1-vue3åŸºæœ¬æ¦‚å¿µ" class="header-anchor">#</a> 1. <code>vue3</code>åŸºæœ¬æ¦‚å¿µ</h2> <p>ğŸ‘Š <a href="https://www.yuque.com/toxic-19/vue522/gdizhg63ym2iec01" target="_blank" rel="noopener noreferrer">è¯­é›€ï¼švue3è§†é¢‘å¿«è®°<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ğŸ‘Š <a href="https://cn.vuejs.org/guide/quick-start.html" target="_blank" rel="noopener noreferrer">Vue3å®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ğŸ‘ŠÂ <a href="https://blog.csdn.net/qq1195566313/category_11618172.html" target="_blank" rel="noopener noreferrer">è§†é¢‘èµ„æ–™<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_1-1-å®‰è£…é¡¹ç›®"><a href="#_1-1-å®‰è£…é¡¹ç›®" class="header-anchor">#</a> 1.1 å®‰è£…é¡¹ç›®</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> init vite@latest <span class="token comment"># ç›´æ¥å®‰è£…vite+vue3é¡¹ç›®</span>
<span class="token function">yarn</span> create vite     <span class="token comment"># ä½¿ç”¨yarnå®‰è£…</span>
<span class="token function">npm</span> init vue@latest <span class="token comment"># é€šè¿‡vue-cliè„šæ‰‹æ¶å®‰è£… é…ç½®æ›´å…¨</span>
<span class="token comment"># ä½¿ç”¨npm createåˆ›å»ºå¤±è´¥äº†ã€‚</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ç›®å½•ç»“æ„ï¼š</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>public <span class="token comment"># ä¸ä¼šè¢«ç¼–è¯‘ å¯ä»¥å­˜æ”¾é™æ€èµ„æº</span>
src
 â”œâ”€assets <span class="token comment"># å­˜æ”¾å¯ä»¥ç¼–è¾‘çš„é™æ€èµ„æº</span>
 â”œâ”€components
 â”œâ”€App.vue <span class="token comment"># å…¨å±€ç»„ä»¶</span>
 â””â”€main.ts <span class="token comment"># å…¨å±€ts</span>
index.html <span class="token comment"># å…¥å£æ–‡ä»¶</span>
vite.config.ts <span class="token comment"># viteçš„é…ç½®æ–‡ä»¶</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>npm run dev</code> è¯¦è§£</p> <p>ä¼šåœ¨<code>node_modules/.bin</code>ä¸‹åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰§è¡Œ<code>npm run dev</code>æ—¶ï¼Œå°±å¯ä»¥åœ¨<code>package.lock.json</code>ä¸­æŸ¥æ‰¾åˆ°è„šæœ¬é“¾æ¥</p> <img src="https://gitee.com/zhizhu_wlz/image-for-md/raw/master/image-20230821234619971.png" alt="image-20230821234619971" style="zoom:67%;"> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;node_modules/vite&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.4.9&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;resolved&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://registry.npmmirror.com/vite/-/vite-4.4.9.tgz&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;integrity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sha512-2mbUn2LlUmNASWwSCNSJ/EG2HuSRTnVNaydp6vMCm5VIqJsjMfbIWtbH2kDuwUVW5mMUKKZvGPX/rqeqVvv1XA==&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;esbuild&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.18.10&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;postcss&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.4.27&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;rollup&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.27.1&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;bin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;vite&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bin/vite.js&quot;</span> # æ‰¾åˆ°è¯¥jsæ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œè¯¥è„šæœ¬
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/sh è„šæœ¬æ–‡ä»¶vite</span>
<span class="token assign-left variable">basedir</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">'s,\\,/,g'</span><span class="token variable">)</span></span>&quot;</span><span class="token variable">)</span></span>

<span class="token keyword">case</span> <span class="token variable"><span class="token variable">`</span><span class="token function">uname</span><span class="token variable">`</span></span> <span class="token keyword">in</span>
    *CYGWIN*<span class="token operator">|</span>*MINGW*<span class="token operator">|</span>*MSYS*<span class="token punctuation">)</span> <span class="token assign-left variable">basedir</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>cygpath <span class="token parameter variable">-w</span> <span class="token string">&quot;<span class="token variable">$basedir</span>&quot;</span><span class="token variable">`</span></span><span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-x</span> <span class="token string">&quot;<span class="token variable">$basedir</span>/node&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">exec</span> <span class="token string">&quot;<span class="token variable">$basedir</span>/node&quot;</span>  <span class="token string">&quot;<span class="token variable">$basedir</span>/../vite/bin/vite.js&quot;</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token keyword">else</span> 
  <span class="token builtin class-name">exec</span> <span class="token function">node</span>  <span class="token string">&quot;<span class="token variable">$basedir</span>/../vite/bin/vite.js&quot;</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token keyword">fi</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ç„¶åå°±å»æ‰§è¡Œä¾èµ–é‡Œé¢çš„<code>vite/bin/vite.js</code></p> <h3 id="_1-2-ä¼˜åŒ–"><a href="#_1-2-ä¼˜åŒ–" class="header-anchor">#</a> 1.2  ä¼˜åŒ–</h3> <ol><li><p>é‡å†™åŒå‘ç»‘å®š</p> <p><code>Vue2</code>ï¼šåŸºäº<code>Object.defineProperty()</code>ã€‚</p> <p><code>Vue3</code>ï¼šåŸºäº<code>Proxy</code>ã€‚</p> <blockquote><p>ä¼˜åŠ¿ï¼š</p> <ol><li>çœç•¥<code>for...in</code>å¾ªç¯ï¼›ä¸¢æ‰éº»çƒ¦çš„å¤‡ä»½æ•°æ®</li> <li>å¯ä»¥ç›‘å¬æ•°ç»„çš„å˜åŒ–ï¼›åŠ¨æ€æ–°å¢çš„å±æ€§å’Œåˆ é™¤å±æ€§ã€‚ã€</li> <li>å¯ä»¥ç›‘å¬æ•°ç»„çš„ç´¢å¼•å’Œ<code>length</code>å±æ€§</li></ol></blockquote></li> <li><p><code>Vue3</code>ä¼˜åŒ–<code>Vdom</code>ï¼šåœ¨Vue2ä¸­æ¯æ¬¡æ›´æ–°<code>diff</code>éƒ½æ˜¯å…¨é‡å¯¹æ¯”ï¼Œ<code>Vue3</code>åˆ™åªå¯¹æ¯”å¸¦æœ‰æ ‡è®°çš„è™šæ‹Ÿ dom ï¼Œå¤§å¤§å‡å°‘äº†éåŠ¨æ€å†…å®¹çš„å¯¹æ¯”æ¶ˆè€—ã€‚</p> <blockquote><p>æ–°å¢äº† patch flag æ ‡è®°</p> <p>åœ¨<a href="https://template-explorer.vuejs.org/#eyJzcmMiOiI8IS0tIDEuIOWKqOaAgeaWh+acrOiKgueCuSDmoIforrA6IDEgLS0+XHJcbjxzcGFuPnt7bXNnfX08L3NwYW4+XHJcbjwhLS0gMi4g5Yqo5oCBY2xhc3Mg5qCH6K6wOiAyIC0tPlxyXG48c3BhbiA6Y2xhc3M9XCJib3JkZXJcIj48L3NwYW4+XHJcblxyXG48c3BhbiA6c3R5bGU9XCJ7IGNvbG9yOiByZWQgfVwiPkhlbGxvIHdvcmxkITwvc3Bhbj5cclxuPHNwYW4+SGVsbG8gd29ybGQhPC9zcGFuPlxyXG48c3Bhbj5IZWxsbyB3b3JsZCE8L3NwYW4+XHJcbjxzcGFuPkhlbGxvIHdvcmxkITwvc3Bhbj5cclxuPHNwYW4+SGVsbG8gd29ybGQhIDwvc3Bhbj4iLCJvcHRpb25zIjp7fX0=" target="_blank" rel="noopener noreferrer">Vue Template explorer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æŸ¥çœ‹è™šæ‹Ÿdomçš„é™æ€æ ‡è®°</p></blockquote> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">1</span>. TEXT <span class="token operator">=</span> <span class="token number">1</span>       // åŠ¨æ€æ–‡æœ¬èŠ‚ç‚¹
<span class="token number">2</span>. CLASS <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token string">1<span class="token bash punctuation"> // åŠ¨æ€class </span>
4. STYLE = 1 &lt;&lt; 2 //åŠ¨æ€style
8. PROPS = 1 &lt;&lt; 3 //åŠ¨æ€å±æ€§ï¼Œä½†ä¸åŒ…å«ç±»åå’Œæ ·å¼
1</span><span class="token number">6</span>. FULLPR0PS <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span> //å…·æœ‰åŠ¨æ€keyå±æ€§ï¼Œå½“keyæ”¹å˜æ—¶ï¼Œéœ€è¦è¿›è¡Œå®Œæ•´çš„diffæ¯”è¾ƒã€‚
<span class="token number">32</span>. HYDRATE_ EVENTS <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token string">5<span class="token bash punctuation"> //å¸¦æœ‰ç›‘å¬äº‹ä»¶çš„èŠ‚ç‚¹</span>
64. STABLE FRAGMENT = 1 &lt;&lt; 6 //ä¸€ä¸ªä¸ä¼šæ”¹å˜å­èŠ‚ç‚¹é¡ºåºçš„fragment
128.KEYED_ FRAGMENT = 1 &lt;&lt; 7 //å¸¦æœ‰keyå±æ€§çš„fragment æˆ–éƒ¨åˆ†å­å­—èŠ‚æœ‰key
256. UNKEYED FRAGMENT = 1&lt;&lt; 8 //å­èŠ‚ç‚¹æ²¡æœ‰key çš„fragment
5</span><span class="token number">12</span>. NEED PATCH <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">9</span> //ä¸€ä¸ªèŠ‚ç‚¹åªä¼šè¿›è¡Œépropsæ¯”è¾ƒ
<span class="token number">1024</span>. DYNAMIC_SLOTS <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">10</span> // åŠ¨æ€slot
-1. HOISTED <span class="token operator">=</span> <span class="token parameter variable">-1</span> // é™æ€èŠ‚ç‚¹
-2. BALL <span class="token operator">=</span> <span class="token parameter variable">-2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ol> <p>å¿½ç•¥æ‰€æœ‰çš„é™æ€èŠ‚ç‚¹ï¼Œåªå¯¹æœ‰æ ‡è®°çš„åŠ¨æ€èŠ‚ç‚¹è¿›è¡Œå¯¹æ¯”ï¼Œè€Œä¸”åœ¨å¤šå±‚çš„åµŒå¥—ä¸‹ä¾ç„¶æœ‰æ•ˆã€‚è®© Vue3 çš„ Vdom æ€§èƒ½å¾—åˆ°äº†å¾ˆå¤§çš„æå‡ã€‚</p> <img src="https://gitee.com/zhizhu_wlz/image-for-md/raw/master/image-20230814234836013.png" alt="image-20230814234836013" style="zoom:80%;"> <ol start="3"><li>æ”¯æŒå¤šä¸ªæ ¹èŠ‚ç‚¹ï¼›æ”¯æŒ <code>render JSX</code>å†™æ³•ã€‚</li> <li><code>Tree shaking</code>ï¼šä¿æŒä»£ç è¿è¡Œç»“æœä¸å˜çš„å‰æä¸‹ï¼Œå»é™¤æ— ç”¨çš„ä»£ç ã€‚
æœ€æ˜æ˜¾çš„ä½“ç°æ˜¯ï¼š<code>import { computed, watch } from 'vue'</code> éœ€è¦ç”¨åˆ°æ‰å¯¼å…¥æ‰æ‰“åŒ…ã€‚</li> <li>ç»„åˆå¼<code>API</code></li></ol> <h3 id="_1-3-æŒ‡ä»¤"><a href="#_1-3-æŒ‡ä»¤" class="header-anchor">#</a> 1.3 æŒ‡ä»¤</h3> <ol><li>é˜»æ­¢è¡¨å•æäº¤</li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> submit <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>ç»‘å®š<code>class</code></li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[flag ? 'active' : 'other', 'h']<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- classå±æ€§hæ˜¯ä¸€ç›´å­˜åœ¨çš„ã€‚åªæœ‰activeå’Œotheræ˜¯æ ¹æ®æ¡ä»¶åˆ¤æ–­ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_2-è™šæ‹Ÿ-domå’Œ-diffç®—æ³•"><a href="#_2-è™šæ‹Ÿ-domå’Œ-diffç®—æ³•" class="header-anchor">#</a> 2. è™šæ‹Ÿ <code>dom</code>å’Œ <code>diff</code>ç®—æ³•</h2> <h3 id="_2-1-æ¦‚å¿µ"><a href="#_2-1-æ¦‚å¿µ" class="header-anchor">#</a> 2.1 æ¦‚å¿µ</h3> <ol><li><p>è™šæ‹Ÿ<code>dom</code>å°±æ˜¯é€šè¿‡<code>JS</code>æ¥ç”Ÿæˆä¸€ä¸ª<code>AST</code>èŠ‚ç‚¹æ ‘ï¼Œå³ï¼šæŠ½è±¡è¯­æ³•æ ‘ã€Abstract Syntax Treeã€‘ï¼Œç”¨æ¥è¡¨ç¤ºç¨‹åºæºä»£ç ç»“æ„çš„æ ‘å½¢ç»“æ„ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½ä»£è¡¨ç€ç¨‹åºä»£ç ä¸­çš„ä¸€ä¸ªè¯­æ³•ç»“æ„ï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„å±‚æ¬¡å…³ç³»è¡¨ç¤ºäº†ä»£ç çš„åµŒå¥—å…³ç³»å’Œè¯­æ³•è§„åˆ™ã€‚æ¯ä¸ªèŠ‚ç‚¹åŒ…å«äº†ä¸ä¹‹ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚èŠ‚ç‚¹çš„ç±»å‹ï¼Œå±æ€§ï¼Œå­èŠ‚ç‚¹ç­‰ç­‰ã€‚</p> <p>ASTèŠ‚ç‚¹åªå…³æ³¨è¯­æ³•ç»“æ„å’Œé€»è¾‘å…³ç³»ã€‚</p></li> <li><p>ä¸ºä»€ä¹ˆè¦æœ‰è™šæ‹Ÿdomï¼Ÿ</p> <p>ä¸€ä¸ª<code>dom</code>ä¸Šçš„å±æ€§æ˜¯éå¸¸å¤šçš„ï¼Œå¯ä»¥ç”¨<code>for...in</code>æ¥éå†ä¸€ä¸‹ã€‚æ‰€ä»¥ç›´æ¥æ“ä½œ<code>dom</code>æ˜¯éå¸¸æµªè´¹æ€§èƒ½çš„ã€‚éœ€è¦å°½å¯èƒ½çš„å°‘æ“ä½œ<code>dom</code>ã€‚</p></li></ol> <h3 id="_2-2-diffç®—æ³•"><a href="#_2-2-diffç®—æ³•" class="header-anchor">#</a> 2.2 <code>diff</code>ç®—æ³•</h3> <p>æºä»£ç ï¼šhttps://github.com/vuejs/core</p> <p><a href="https://gitee.com/fe-mirror/vue3" target="_blank" rel="noopener noreferrer">vue3: vue3çš„vuejs/core GitHub ä»“åº“é•œåƒ (gitee.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><code>packages/runtime-core/src/vnode.ts</code></p> <h4 id="_1-æ— key-patchæ›¿æ¢"><a href="#_1-æ— key-patchæ›¿æ¢" class="header-anchor">#</a> 1.  æ— <code>key</code> â€” <code>patch</code>æ›¿æ¢</h4> <p>ä¸¾ä¾‹ï¼šç”±<code>[a, b, c, d]</code> åœ¨ä¸­é—´æ–°å¢ä¸€ä¸ªå…ƒç´ å˜ä¸º<code>[a, b, 111, c, d]</code></p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code>  <span class="token comment">// æ²¡æœ‰keyå€¼çš„å­èŠ‚ç‚¹åˆ—è¡¨è¿›è¡Œdiffå’Œpatchæ“ä½œ</span>
  <span class="token comment">// æ ¹æ®æ–°æ—§èŠ‚ç‚¹çš„å·®å¼‚æ¥æ›´æ–°å®¹å™¨ä¸­çš„å­èŠ‚ç‚¹</span>
  <span class="token comment">// å¹¶æ ¹æ®èŠ‚ç‚¹çš„ä¸ªæ•°æ¥å†³å®šæ˜¯å¸è½½æ—§çš„å­èŠ‚ç‚¹è¿˜æ˜¯æŒ‚è½½æ–°çš„å­èŠ‚ç‚¹</span>
  <span class="token keyword">const</span> patchUnkeyedChildren <span class="token operator">=</span> <span class="token punctuation">(</span>
    c1<span class="token operator">:</span> VNode<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// æ—§çš„å­èŠ‚ç‚¹æ•°ç»„  [ a, b, c, d ]</span>
    c2<span class="token operator">:</span> VNodeArrayChildren<span class="token punctuation">,</span> <span class="token comment">// æ–°çš„å­èŠ‚ç‚¹æ•°ç»„ [ a, b, 111, c, d]</span>
    container<span class="token operator">:</span> RendererElement<span class="token punctuation">,</span>
    anchor<span class="token operator">:</span> RendererNode <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    parentComponent<span class="token operator">:</span> ComponentInternalInstance <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    parentSuspense<span class="token operator">:</span> SuspenseBoundary <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    isSVG<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
    slotScopeIds<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    optimized<span class="token operator">:</span> <span class="token builtin">boolean</span>
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    c1 <span class="token operator">=</span> c1 <span class="token operator">||</span> <span class="token constant">EMPTY_ARR</span> <span class="token comment">// å¦‚æœc1æˆ–c2ä¸ºç©ºï¼Œåˆ™èµ‹å€¼ä¸ºç©ºæ•°ç»„</span>
    c2 <span class="token operator">=</span> c2 <span class="token operator">||</span> <span class="token constant">EMPTY_ARR</span> 
    <span class="token keyword">const</span> oldLength <span class="token operator">=</span> c1<span class="token punctuation">.</span>length
    <span class="token keyword">const</span> newLength <span class="token operator">=</span> c2<span class="token punctuation">.</span>length
    <span class="token keyword">const</span> commonLength <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>oldLength<span class="token punctuation">,</span> newLength<span class="token punctuation">)</span> <span class="token comment">// æ‹¿åˆ°æœ€çŸ­é•¿åº¦ä½œä¸ºcommonLength æ­¤åˆ»æ˜¯4</span>
    <span class="token keyword">let</span> i
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> commonLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> nextChild <span class="token operator">=</span> <span class="token punctuation">(</span>c2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> optimized <span class="token comment">// æ ¹æ®optimizedçš„å€¼å°†c2[i]å…‹éš†æˆ–æ ‡å‡†åŒ–</span>
        <span class="token operator">?</span> <span class="token function">cloneIfMounted</span><span class="token punctuation">(</span>c2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">as</span> VNode<span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token function">normalizeVNode</span><span class="token punctuation">(</span>c2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token function">patch</span><span class="token punctuation">(</span>
        c1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
        nextChild<span class="token punctuation">,</span>
        container<span class="token punctuation">,</span>
        <span class="token keyword">null</span><span class="token punctuation">,</span>
        parentComponent<span class="token punctuation">,</span>
        parentSuspense<span class="token punctuation">,</span>
        isSVG<span class="token punctuation">,</span>
        slotScopeIds<span class="token punctuation">,</span>
        optimized
      <span class="token punctuation">)</span> <span class="token comment">// å¯¹c1[i]å’ŒnextChildè¿›è¡Œdiffå’Œé‡æ–°æ¸²æŸ“æ“ä½œ</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldLength <span class="token operator">&gt;</span> newLength<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// remove old ç§»é™¤æ‰æ—§èŠ‚ç‚¹åˆ—è¡¨ä¸­å¤šä½™çš„èŠ‚ç‚¹</span>
      <span class="token function">unmountChildren</span><span class="token punctuation">(</span> <span class="token comment">// method: å¸è½½æ—§çš„å¤šä½™çš„å­èŠ‚ç‚¹</span>
        c1<span class="token punctuation">,</span>
        parentComponent<span class="token punctuation">,</span>
        parentSuspense<span class="token punctuation">,</span>
        <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token boolean">false</span><span class="token punctuation">,</span>
        commonLength
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// mount new æœ‰ä¸€äº›æ–°çš„å­èŠ‚ç‚¹éœ€è¦è¢«æŒ‚è½½</span>
      <span class="token function">mountChildren</span><span class="token punctuation">(</span>
        c2<span class="token punctuation">,</span>
        container<span class="token punctuation">,</span>
        anchor<span class="token punctuation">,</span>
        parentComponent<span class="token punctuation">,</span>
        parentSuspense<span class="token punctuation">,</span>
        isSVG<span class="token punctuation">,</span>
        slotScopeIds<span class="token punctuation">,</span>
        optimized<span class="token punctuation">,</span>
        commonLength
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><h3 id="_2-3-æœ‰-key"><a href="#_2-3-æœ‰-key" class="header-anchor">#</a> 2.3 æœ‰ <code>key</code></h3> <h4 id="_1-åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦ç›¸ç­‰"><a href="#_1-åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦ç›¸ç­‰" class="header-anchor">#</a> 1. åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦ç›¸ç­‰</h4> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">isSameVNodeType</span><span class="token punctuation">(</span>n1<span class="token operator">:</span> VNode<span class="token punctuation">,</span> n2<span class="token operator">:</span> VNode<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    __DEV__ <span class="token operator">&amp;&amp;</span> <span class="token comment">// __DEV__ æ˜¯å¼€å‘ç¯å¢ƒä¸‹çš„å…¨å±€å˜é‡</span>
    n2<span class="token punctuation">.</span>shapeFlag <span class="token operator">&amp;</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">COMPONENT</span> <span class="token operator">&amp;&amp;</span> <span class="token comment">// &amp; åˆ¤æ–­n2çš„shapeFlagå±æ€§æ˜¯å¦åŒ…å«COMPONENTæ ‡å¿—ï¼Œè¡¨ç¤ºç»„ä»¶ç±»å‹</span>
    hmrDirtyComponents<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>n2<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token class-name"><span class="token keyword">as</span></span> ConcreteComponent<span class="token punctuation">)</span> 
    <span class="token comment">// hmrDirtyComponentsæ˜¯å…¨å±€Seté›†åˆï¼Œå­˜å‚¨éœ€è¦çƒ­æ›´æ–°çš„ç»„ä»¶ã€‚å°†n2çš„ç±»å‹å¼ºåˆ¶è½¬æ¢ä¸ºConcreteComponent</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ­¤æ—¶å¤„äºå¼€å‘æ¨¡å¼, n2æ˜¯éœ€è¦çƒ­æ›´æ–°çš„ç»„ä»¶ï¼Œåˆ™èŠ‚ç‚¹ç±»å‹ä¸åŒ</span>
    <span class="token comment">// HMR only: if the component has been hot-updated, force a reload.</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// å¦‚æœç±»å‹ï¼ˆdiv &amp;&amp; divï¼‰å’Œkeyå€¼ï¼ˆ:key=&quot;key&quot;ï¼‰ç›¸åŒï¼Œåˆ™æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ç±»å‹</span>
  <span class="token keyword">return</span> n1<span class="token punctuation">.</span>type <span class="token operator">===</span> n2<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> n1<span class="token punctuation">.</span>key <span class="token operator">===</span> n2<span class="token punctuation">.</span>key
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_2-patchæ›´æ–°ç®—æ³•"><a href="#_2-patchæ›´æ–°ç®—æ³•" class="header-anchor">#</a> 2. patchæ›´æ–°ç®—æ³•</h4> <h4 id="_3-å‰åºç®—æ³•"><a href="#_3-å‰åºç®—æ³•" class="header-anchor">#</a> 3. å‰åºç®—æ³•</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token comment">// 1. sync from start c1å’Œc2çš„é¦–é¦–æ¯”è¾ƒã€‚ç›´åˆ°ä¸åŒå°±break</span>
    <span class="token comment">// (a b) c</span>
    <span class="token comment">// (a b) d e</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> e1 <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;=</span> e2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> n1 <span class="token operator">=</span> c1<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
      <span class="token keyword">const</span> n2 <span class="token operator">=</span> <span class="token punctuation">(</span>c2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> optimized
        <span class="token operator">?</span> <span class="token function">cloneIfMounted</span><span class="token punctuation">(</span>c2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">as</span> VNode<span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token function">normalizeVNode</span><span class="token punctuation">(</span>c2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isSameVNodeType</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// åŒä¸€ä¸ªèŠ‚ç‚¹</span>
        <span class="token comment">// patchå‡½æ•°ï¼šç”¨äºå¤„ç†è™šæ‹Ÿdomçš„æ›´æ–°å’Œæ¸²æŸ“ã€‚åœ¨Vue3ä¸­ç”¨äºå¯¹æ¯”æ–°æ—§èŠ‚ç‚¹å¹¶æ›´æ–°å®é™…çš„domå…ƒç´ </span>
        <span class="token function">patch</span><span class="token punctuation">(</span> 
          n1<span class="token punctuation">,</span> <span class="token comment">// æ—§çš„è™šæ‹ŸèŠ‚ç‚¹</span>
          n2<span class="token punctuation">,</span> <span class="token comment">// æ–°çš„è™šæ‹ŸèŠ‚ç‚¹</span>
          container<span class="token punctuation">,</span> <span class="token comment">// è¦æ¸²æŸ“çš„å®é™…DOMå…ƒç´ çš„å®¹å™¨</span>
          <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// anchor: é”šç‚¹åœ¨æ›´æ–°è™šæ‹ŸDOMæ ‘æ—¶ï¼Œç¡®å®šéœ€è¦æ’å…¥æˆ–æ›¿æ¢å…ƒç´ çš„ä½ç½®</span>
          parentComponent<span class="token punctuation">,</span> 
          parentSuspense<span class="token punctuation">,</span>
          isSVG<span class="token punctuation">,</span>
          slotScopeIds<span class="token punctuation">,</span> <span class="token comment">// æ’æ§½ä½œç”¨åŸŸID</span>
          optimized <span class="token comment">// æ˜¯å¦ä¼˜åŒ–æ¨¡å¼</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// c &lt;-Ã—-&gt; d  æ­¤æ—¶iä¸º2</span>
        <span class="token keyword">break</span>
      <span class="token punctuation">}</span>
      i<span class="token operator">++</span> 
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="_4-ååºç®—æ³•"><a href="#_4-ååºç®—æ³•" class="header-anchor">#</a> 4. ååºç®—æ³•</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token comment">// 2. sync from end</span>
    <span class="token comment">// a (b c)</span>
    <span class="token comment">// d e (b c)</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> e1 <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;=</span> e2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> n1 <span class="token operator">=</span> c1<span class="token punctuation">[</span>e1<span class="token punctuation">]</span>
      <span class="token keyword">const</span> n2 <span class="token operator">=</span> <span class="token punctuation">(</span>c2<span class="token punctuation">[</span>e2<span class="token punctuation">]</span> <span class="token operator">=</span> optimized
        <span class="token operator">?</span> <span class="token function">cloneIfMounted</span><span class="token punctuation">(</span>c2<span class="token punctuation">[</span>e2<span class="token punctuation">]</span> <span class="token keyword">as</span> VNode<span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token function">normalizeVNode</span><span class="token punctuation">(</span>c2<span class="token punctuation">[</span>e2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isSameVNodeType</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">patch</span><span class="token punctuation">(</span>
          n1<span class="token punctuation">,</span>
          n2<span class="token punctuation">,</span>
          container<span class="token punctuation">,</span>
          <span class="token keyword">null</span><span class="token punctuation">,</span>
          parentComponent<span class="token punctuation">,</span>
          parentSuspense<span class="token punctuation">,</span>
          isSVG<span class="token punctuation">,</span>
          slotScopeIds<span class="token punctuation">,</span>
          optimized
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">break</span>
      <span class="token punctuation">}</span>
      e1<span class="token operator">--</span>
      e2<span class="token operator">--</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="_5-æ–°èŠ‚ç‚¹å¤š-æŒ‚è½½"><a href="#_5-æ–°èŠ‚ç‚¹å¤š-æŒ‚è½½" class="header-anchor">#</a> 5. æ–°èŠ‚ç‚¹å¤šï¼ŒæŒ‚è½½</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token comment">// 3. common sequence + mount</span>
    <span class="token comment">// (a b)</span>
    <span class="token comment">// (a b) c</span>
    <span class="token comment">// i = 2, e1 = 1, e2 = 2</span>
    <span class="token comment">// (a b)</span>
    <span class="token comment">// c (a b)</span>
    <span class="token comment">// i = 0, e1 = -1, e2 = 0</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> e1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> e2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> nextPos <span class="token operator">=</span> e2 <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">const</span> anchor <span class="token operator">=</span> nextPos <span class="token operator">&lt;</span> l2 <span class="token operator">?</span> <span class="token punctuation">(</span>c2<span class="token punctuation">[</span>nextPos<span class="token punctuation">]</span> <span class="token keyword">as</span> VNode<span class="token punctuation">)</span><span class="token punctuation">.</span>el <span class="token operator">:</span> parentAnchor
        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> e2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">patch</span><span class="token punctuation">(</span>
            <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// c1è®¾ç½®ä¸ºnull,ä¸éœ€è¦ä»£æ›¿æ—§èŠ‚ç‚¹ã€‚ç›´æ¥æ–°å¢c2å³å¯</span>
            <span class="token punctuation">(</span>c2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> optimized
              <span class="token operator">?</span> <span class="token function">cloneIfMounted</span><span class="token punctuation">(</span>c2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">as</span> VNode<span class="token punctuation">)</span>
              <span class="token operator">:</span> <span class="token function">normalizeVNode</span><span class="token punctuation">(</span>c2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            container<span class="token punctuation">,</span>
            anchor<span class="token punctuation">,</span>
            parentComponent<span class="token punctuation">,</span>
            parentSuspense<span class="token punctuation">,</span>
            isSVG<span class="token punctuation">,</span>
            slotScopeIds<span class="token punctuation">,</span>
            optimized
          <span class="token punctuation">)</span>
          i<span class="token operator">++</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h4 id="_6-æ—§èŠ‚ç‚¹å¤š-å¸è½½"><a href="#_6-æ—§èŠ‚ç‚¹å¤š-å¸è½½" class="header-anchor">#</a> 6. æ—§èŠ‚ç‚¹å¤šï¼Œå¸è½½</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token comment">// 4. common sequence + unmount</span>
    <span class="token comment">// (a b) c</span>
    <span class="token comment">// (a b)</span>
    <span class="token comment">// i = 2, e1 = 2, e2 = 1</span>
    <span class="token comment">// a (b c)</span>
    <span class="token comment">// (b c)</span>
    <span class="token comment">// i = 0, e1 = 0, e2 = -1</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> e2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> e1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">unmount</span><span class="token punctuation">(</span>c1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> parentComponent<span class="token punctuation">,</span> parentSuspense<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// å°†c1å¸è½½æ‰</span>
        i<span class="token operator">++</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_3-bemæ¶æ„"><a href="#_3-bemæ¶æ„" class="header-anchor">#</a> 3. BEMæ¶æ„</h2> <p>å‚è€ƒï¼š<a href="https://zhuanlan.zhihu.com/p/524640605" target="_blank" rel="noopener noreferrer">åœ¨Vueä¸­ï¼Œå¦‚ä½•åˆ©ç”¨BEMå‘½åæ³•ï¼Œå¹¶ç»“åˆSASS/LESSä¹¦å†™CSS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>BEMï¼šBlock å—     Element å…ƒç´         Modifier ä¿®é¥°ç¬¦</p> <p><code>.block__element--modifier {}</code></p></blockquote> <p><strong>ç¼–å†™ï¼š</strong></p> <ol><li>ä½¿ç”¨<code>SCSS</code>  å®‰è£…<code>SASS</code></li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> sass <span class="token parameter variable">-D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>æ¡ˆä¾‹ï¼š</li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toxic-content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toxic-content__items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in 100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ item }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token keyword">@include</span> <span class="token function">block</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
  <span class="token keyword">@include</span> <span class="token function">ele</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #cccccc<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span>4px
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>å¸Œæœ›åœ¨ html ä¸­ä½¿ç”¨ BEM æ¶æ„è¿›è¡Œç±»åçš„ä¹¦å†™ï¼Œåœ¨å®šä¹‰ scss æ—¶å¯ä»¥å‡å°‘å¯¹é‡å¤å†…å®¹çš„ä¹¦å†™ã€‚</p> <ol start="3"><li>bem.scss å®šä¹‰</li></ol> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token property"><span class="token variable">$namespace</span></span><span class="token punctuation">:</span> <span class="token string">'toxic'</span> <span class="token statement keyword">!default</span><span class="token punctuation">;</span>
<span class="token property"><span class="token variable">$block-sel</span></span><span class="token punctuation">:</span> <span class="token string">'-'</span> <span class="token statement keyword">!default</span><span class="token punctuation">;</span>
<span class="token property"><span class="token variable">$element-sel</span></span><span class="token punctuation">:</span> <span class="token string">'__'</span> <span class="token statement keyword">!default</span><span class="token punctuation">;</span>
<span class="token property"><span class="token variable">$mod-sel</span></span><span class="token punctuation">:</span> <span class="token string">'--'</span> <span class="token statement keyword">!default</span><span class="token punctuation">;</span>
<span class="token comment">/* BEM .block__element--modifier */</span>

<span class="token comment">// block</span>
<span class="token keyword">@mixin</span> <span class="token function">block</span><span class="token punctuation">(</span><span class="token variable">$block</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property"><span class="token variable">$BlockName</span></span><span class="token punctuation">:</span> #<span class="token punctuation">{</span><span class="token variable">$namespace</span> <span class="token operator">+</span> <span class="token variable">$block-sel</span> <span class="token operator">+</span> <span class="token variable">$block</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token selector">.<span class="token variable">#{$BlockName}</span> </span><span class="token punctuation">{</span>
    <span class="token keyword">@content</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// element</span>
<span class="token keyword">@mixin</span> <span class="token function">ele</span><span class="token punctuation">(</span><span class="token variable">$element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* éœ€è¦è·å–åˆ°çˆ¶çº§çš„ç±»å */</span>
  <span class="token property"><span class="token variable">$selector</span></span><span class="token punctuation">:</span> &amp;<span class="token punctuation">;</span>
  <span class="token property"><span class="token variable">$ElementName</span></span><span class="token punctuation">:</span> #<span class="token punctuation">{</span><span class="token variable">$selector</span> <span class="token operator">+</span> <span class="token variable">$element-sel</span> <span class="token operator">+</span> <span class="token variable">$element</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">/* åœ¨ä½¿ç”¨BEMè§„åˆ™çš„æƒ…å†µæ²¡æœ‰å¿…è¦å†è¿›è¡ŒSCSSçš„åµŒå¥— */</span>
  <span class="token atrule"><span class="token rule">@at-root</span></span> <span class="token punctuation">{</span> <span class="token comment">/* at-rootå¯ä»¥è·³å‡ºSCSSçš„åµŒå¥— */</span>
    <span class="token selector"><span class="token variable">#{$ElementName}</span> </span><span class="token punctuation">{</span> <span class="token comment">/* ä¸éœ€è¦å†åŠ . å› ä¸º$selectorå·²ç»åŒ…å«äº† */</span>
      <span class="token keyword">@content</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// modified</span>
<span class="token keyword">@mixin</span> <span class="token function">modify</span><span class="token punctuation">(</span><span class="token variable">$modifier</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property"><span class="token variable">$selector</span></span><span class="token punctuation">:</span> &amp;<span class="token punctuation">;</span>
  <span class="token property"><span class="token variable">$ModifierName</span></span><span class="token punctuation">:</span> #<span class="token punctuation">{</span><span class="token variable">$selector</span> <span class="token operator">+</span> <span class="token variable">$mod-sel</span> <span class="token operator">+</span> <span class="token variable">$modifier</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token atrule"><span class="token rule">@at-root</span></span> <span class="token punctuation">{</span>
    <span class="token selector"><span class="token variable">#{$ModifierName}</span> </span><span class="token punctuation">{</span>
      <span class="token keyword">@content</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="_4-çˆ¶å­ç»„ä»¶ä¼ å€¼"><a href="#_4-çˆ¶å­ç»„ä»¶ä¼ å€¼" class="header-anchor">#</a> 4. çˆ¶å­ç»„ä»¶ä¼ å€¼</h2> <h3 id="_4-1-defineprops"><a href="#_4-1-defineprops" class="header-anchor">#</a> 4.1 <code>defineProps</code></h3> <ol><li><p>JSç‰ˆæœ¬ï¼Œä¸ Vue2 å¹¶æ²¡æœ‰å¤ªå¤§å·®åˆ«ã€‚</p> <p>ä½¿ç”¨ <code>defineProps</code> å»æ¥æ”¶ã€‚</p></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„å€¼ éœ€è¦ä½¿ç”¨åˆ°propsä¸­çš„å€¼çš„è¯éœ€è¦å»æ¥æ”¶å‡½æ•°ä¼ é€’</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// è¿™æ ·å°±å¯ä»¥é€šè¿‡props.nameå»è®¿é—®åˆ°æ¥æ”¶åˆ°çš„nameå€¼</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'no Name'</span> <span class="token comment">// è¿™ç§å½¢å¼å¯ä»¥ç›´æ¥ä¹¦å†™é»˜è®¤å€¼</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">list</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> array<span class="token punctuation">,</span>
    <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="2"><li>TSç‰ˆæœ¬</li></ol> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">type</span> <span class="token class-name">Props</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  list<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¯¹TSç‰ˆæœ¬çš„propsæŒ‡å®šé»˜è®¤å€¼éœ€è¦ä½¿ç”¨ withDefaultsã€‚webstormä¼šå¯¹å…¶æŠ¥é”™æ˜¯ideaçš„é—®é¢˜ã€‚ä¸æ˜¯ä½¿ç”¨é—®é¢˜ã€‚</span>
<span class="token keyword">const</span> defaultProps <span class="token operator">=</span> <span class="token function">widthDefaults</span><span class="token punctuation">(</span>
	<span class="token generic-function"><span class="token function">defineProps</span><span class="token generic class-name"><span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'No Name'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">list</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token comment">// æ¥æ”¶ä¸¤ä¸ªå‚æ•°ã€‚å…¶ä¸€ä¸ºï¼šprops å…¶äºŒä¸ºé»˜è®¤å€¼å¯¹è±¡</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_4-2-defineemit"><a href="#_4-2-defineemit" class="header-anchor">#</a> 4.2 <code>defineEmit</code></h3> <ol><li>JSç‰ˆæœ¬ï¼Œè‡ªå®šä¹‰æ´¾å‘äº‹ä»¶ã€‚åŒä¸Šä¸Vue2ç‰ˆæœ¬å¹¶æ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'on-click'</span><span class="token punctuation">,</span> <span class="token string">'back'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// æ´¾å‘äº‹ä»¶åç§°ç”¨[]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>TSç‰ˆæœ¬</li></ol> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token generic-function"><span class="token function">defineEmits</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">{</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token string">'back'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// å®šä¹‰äº‹ä»¶backï¼Œè¯¥è‡ªå®šä¹‰äº‹ä»¶ä¼ é€’å‚æ•°nameã€‚æ— è¿”å›void</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>ä½¿ç”¨ã€‚åŒVue2</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">sendToParent</span> <span class="token operator">=</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'on-click'</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_4-3-defineexpose"><a href="#_4-3-defineexpose" class="header-anchor">#</a> 4.3 <code>defineExpose</code></h3> <p>$Vue2$ å¯ä»¥ç›´æ¥åœ¨å­ç»„ä»¶ä¸Šå®šä¹‰ $ref $ ç„¶åçˆ¶ç»„ä»¶é€šè¿‡ $ref$ å¯ä»¥è·å–åˆ°å­ç»„ä»¶çš„æ–¹æ³•å’Œå±æ€§ã€‚åŒæ ·ä¹Ÿå¯ä»¥å»æ§åˆ¶å’Œè°ƒç”¨ã€‚</p> <p><strong>åŸå› </strong>:  å› ä¸ºåœ¨ $Vue3$ ä¸­æˆ‘ä»¬ä½¿ç”¨ä½¿ç”¨äº†<code>&lt;script setup&gt;</code>è¯­æ³•ç³–ï¼Œé»˜è®¤ç»„ä»¶æ˜¯å…³é—­çš„ã€‚æˆ‘ä»¬æ— æ³•é€šè¿‡ $ref$ æˆ–  $parent$ å»è®¿é—®åˆ°è¯¥ç»„ä»¶å®ä¾‹ã€‚</p> <p>â€‹		   é‚£ä¹ˆä¸ºäº†èƒ½åœ¨è¯­æ³•ç³–ç»„ä»¶ä¸­æ˜ç¡®è¦æš´éœ²å‡ºå»çš„å±æ€§ï¼Œä½¿ç”¨<code>defineExpose</code>è¿›è¡Œæš´éœ²ã€‚</p> <hr> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- çˆ¶ç»„ä»¶ä¸­å®šä¹‰å­ç»„ä»¶ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>WaterFall</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>refWaterfall<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@on-click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getItem<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>WaterFall</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeVisible<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ›´æ”¹å­ç»„ä»¶exposeçš„å€¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// åœ¨å­ç»„ä»¶ä¸­ï¼šå»æš´éœ²å‡ºéœ€è¦ä½¿ç”¨åˆ°çš„æ–¹æ³•å’Œå±æ€§</span>
<span class="token keyword">const</span> visible <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">'expose from child'</span><span class="token punctuation">,</span>
  visible
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// çˆ¶ç»„ä»¶ä¸­å»è·å–å­ç»„ä»¶çš„å®ä¾‹ WaterFallæ˜¯å¯¼å…¥æ—¶çš„å‘½å</span>
<span class="token keyword">const</span> refWaterfall <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span>InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> WaterFall<span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// å¯ä»¥åœ¨è¿™é‡Œç›´æ¥æ›´æ”¹å­ç»„ä»¶æ•°æ®</span>
<span class="token keyword">const</span> <span class="token function-variable function">changeVisible</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  refWaterfall<span class="token punctuation">.</span>value<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token operator">!</span>refWaterfall<span class="token punctuation">.</span>value<span class="token punctuation">.</span>visible
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å¦‚æœåœ¨å®šä¹‰å®Œ $refWaterfall$ ä¹‹åå°±è¦è·å–æ˜¯åªèƒ½æ‹¿åˆ° <code>undefined</code>ã€‚åŸå› æ˜¯å­ç»„ä»¶è¿˜æ²¡è¢«æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚</p> <p>é™¤éä½¿ç”¨ <code>nextTick</code>ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>refWaterfall<span class="token punctuation">.</span>value<span class="token punctuation">.</span>visible <span class="token operator">+</span> <span class="token string">' ==== '</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_5-ç€‘å¸ƒæµ"><a href="#_5-ç€‘å¸ƒæµ" class="header-anchor">#</a> 5. ç€‘å¸ƒæµ</h2> <blockquote><p>éœ€è¦å°†å¸ƒå±€å†…çš„å…ƒç´ è‡ªåŠ¨è¿›è¡ŒæµåŠ¨å’Œå¹³è¡¡ï¼Œå°½å¯èƒ½ä¿è¯æ¯åˆ—çš„é«˜åº¦è¶‹äºç›¸åŒã€‚</p> <p>ç›®å‰æœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€æ˜¯ç­‰é«˜å‹ï¼ŒäºŒæ˜¯ç­‰å®½å‹ã€‚</p> <ol><li>ç­‰å®½å‹ï¼šè®¾ç½®åˆ—å®½åº¦ï¼Œç„¶åè®¡ç®—ç¬¬ä¸€è¡Œèƒ½å¤Ÿå±•ç¤ºçš„åˆ—æ•°ï¼Œä¹‹åä¾æ®æœ€çŸ­çš„ä¸€åˆ—å‘æ¯ä¸€é¡¹å»æ·»åŠ é¡¹ç›®ã€‚<strong>æ‰¾çŸ­è¡¥ä½</strong>
åŠ£åŠ¿ï¼šæ¯æ¸²æŸ“ä¸€æ¬¡éƒ½ä¼šè®¡ç®—ä¸€æ¬¡ $top$ï¼Œ$left $ å€¼ã€‚è€Œä¸”å›¾ç‰‡çš„é¡ºåºæ˜¯æ‰“ä¹±çš„ã€‚</li></ol></blockquote> <h3 id="_5-1-ç­‰å®½æ‰‹åŠ¨è®¡ç®—"><a href="#_5-1-ç­‰å®½æ‰‹åŠ¨è®¡ç®—" class="header-anchor">#</a> 5.1 ç­‰å®½æ‰‹åŠ¨è®¡ç®—</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toxic-waterfall<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toxic-waterfall__items<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ height:waterfallItem.height + 'px', background:waterfallItem.background,
                 left: waterfallItem.left + 'px', top:waterfallItem.top + 'px' }<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(waterfallItem, index) in waterList<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>é‡æ–°æ ¹æ®<code>props.list</code> è¿›è¡Œè®¾ç½® <code>top</code> å’Œ <code>left</code>ã€‚å¾—åˆ°<code>waterList</code>è¿›è¡Œå¾ªç¯ã€‚</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token generic-function"><span class="token function">defineProps</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">{</span>list<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> waterList <span class="token operator">=</span> <span class="token generic-function"><span class="token function">reactive</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// ç€‘å¸ƒæµéœ€è¦ä¿æŒé«˜åº¦è¶‹äºç›¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹é«˜åº¦æ•°ç»„è¿›è¡Œç»´æŠ¤</span>
<span class="token keyword">const</span> heightList<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// ä¸éœ€è¦è¿›è¡Œå“åº”å¼è½¬æ¢</span>
<span class="token comment">// å› ä¸ºæ˜¯ç»å¯¹å®šä¹‰ï¼Œéœ€è¦å¯¹æ¯ä¸€é¡¹éƒ½è®¾ç½®leftå’Œtop</span>
<span class="token keyword">const</span> <span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> width <span class="token operator">=</span> <span class="token number">130</span>
  <span class="token keyword">const</span> top <span class="token operator">=</span> <span class="token number">20</span>
  <span class="token comment">// ä¸€è¡Œå‡ åˆ—</span>
  <span class="token keyword">const</span> column <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth <span class="token operator">/</span> width<span class="token punctuation">)</span> <span class="token comment">// å‘ä¸‹å–æ•´</span>
  <span class="token comment">// 1. å…ˆå¯¹listä¸­çš„å‰columnä¸ªå³ç¬¬ä¸€è¡Œè®¾ç½®leftå’Œtop</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> props<span class="token punctuation">.</span>list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> column<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">=</span> top
      props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>left <span class="token operator">=</span> i <span class="token operator">*</span> width
      waterList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
      heightList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>height <span class="token operator">+</span> top<span class="token punctuation">)</span> <span class="token comment">// è®°å½•æ¯ä¸€é¡¹çš„é«˜åº¦</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// æ‰¾åˆ°ç›®å‰æœ€å°çš„é«˜åº¦å’Œç´¢å¼•</span>
      <span class="token keyword">let</span> minHeight <span class="token operator">=</span> heightList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      <span class="token keyword">let</span> minIndex <span class="token operator">=</span> <span class="token number">0</span>
      heightList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>height<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>minHeight <span class="token operator">&gt;</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          minHeight <span class="token operator">=</span> height
          minIndex <span class="token operator">=</span> index
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">=</span> minHeight <span class="token operator">+</span> top
      props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>left <span class="token operator">=</span> minIndex <span class="token operator">*</span> width
      waterList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
      heightList<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span> <span class="token operator">+=</span> props<span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token number">20</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  window<span class="token punctuation">.</span><span class="token function-variable function">onresize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><ol><li>åœ¨ä¸Šè¿°ä»£ç ä¸­æ˜¯é€šè¿‡<code>for</code>å¾ªç¯æ‰¾åˆ°æœ€ä½åˆ—é«˜å’Œç´¢å¼•çš„ã€‚</li> <li>ä¹Ÿå¯ä»¥é€šè¿‡<code>Math.min</code>å’Œ<code>findIndex</code>ï¼š</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> minHeight <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token operator">...</span>heightList<span class="token punctuation">)</span> <span class="token comment">// ä½¿ç”¨å¯¹è±¡ï¼šåˆ—è¡¨</span>
<span class="token keyword">let</span> minIndex <span class="token operator">=</span> heightList<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">===</span> minHeight<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_5-2"><a href="#_5-2" class="header-anchor">#</a> 5.2</h3> <h3 id="_5-3"><a href="#_5-3" class="header-anchor">#</a> 5.3</h3> <h2 id="_6-ç»„ä»¶"><a href="#_6-ç»„ä»¶" class="header-anchor">#</a> 6. ç»„ä»¶</h2> <h3 id="_6-1-å±€éƒ¨ç»„ä»¶"><a href="#_6-1-å±€éƒ¨ç»„ä»¶" class="header-anchor">#</a> 6.1 å±€éƒ¨ç»„ä»¶</h3> <p><a href="https://zhuanlan.zhihu.com/p/529152853?utm_id=0&amp;wd=&amp;eqid=9a693c0d00025f6000000002647850d6" target="_blank" rel="noopener noreferrer">Vue3 â€”â€” æ’æ§½ v-slot<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_6-2-é€’å½’ç»„ä»¶"><a href="#_6-2-é€’å½’ç»„ä»¶" class="header-anchor">#</a> 6.2 é€’å½’ç»„ä»¶</h3> <ol><li>ç®€å•å°è£…ä¸€ä¸ªæ ‘å½¢ç»„ä»¶ <code>Tree.vue</code></li> <li>æ•°æ®å®šä¹‰ä¸æ¨¡æ‹Ÿï¼š</li></ol> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Tree</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  checked<span class="token operator">:</span> <span class="token builtin">boolean</span>
  children<span class="token operator">?</span><span class="token operator">:</span> Tree<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> tree <span class="token operator">=</span> <span class="token generic-function"><span class="token function">reactive</span><span class="token generic class-name"><span class="token operator">&lt;</span>Tree<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> checked<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">&quot;1-1&quot;</span><span class="token punctuation">,</span> checked<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> checked<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">&quot;2-1&quot;</span><span class="token punctuation">,</span> checked<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">&quot;2-2&quot;</span><span class="token punctuation">,</span> checked<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> checked<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      children<span class="token operator">:</span> <span class="token punctuation">[</span>
       <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;3-1&quot;</span><span class="token punctuation">,</span> checked<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token punctuation">[</span>
           <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;3-1-1&quot;</span><span class="token punctuation">,</span> checked<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;3-1-2&quot;</span><span class="token punctuation">,</span> checked<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
         <span class="token punctuation">]</span>
       <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span> checked<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ol start="3"><li>çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ <code>:tree-data</code>ï¼Œå­ç»„ä»¶æ¥æ”¶<code>defineProps&lt;{treeData?: Tree[]}&gt;()</code></li> <li>è¿›è¡Œé€’å½’ï¼šéœ€è¦åšç»“æŸåˆ¤æ–­ï¼Œå¦åˆ™ä¼šå‘ç”Ÿæ ˆæº¢å‡ºçš„é”™è¯¯ã€‚<code>v-if=&quot;item?.children?.length&quot;</code></li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tree-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in treeData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click.stop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleItem(item)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.checked<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Tree</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item?.children?.length<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:tree-data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item?.children<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Tree</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_6-3-æ’æ§½"><a href="#_6-3-æ’æ§½" class="header-anchor">#</a> 6.3 æ’æ§½</h3> <blockquote><p>å®ç°äº†ä¸€å¥—å†…å®¹åˆ†å‘çš„ APIï¼Œå°† slot å…ƒç´ ä½œä¸ºæ‰¿è½½åˆ†å‘å†…å®¹çš„å‡ºå£ã€‚ä½¿ç”¨æ’æ§½ä½¿ Vue ç»„ä»¶çš„è®¾è®¡æ›´åŠ çµæ´»ã€‚</p></blockquote> <ol><li>å…·åæ’æ§½ï¼šä»¥ä¾¿åç»­ä»£ç çš„æ‰©å±•çš„å¢å¼ºä»£ç çš„å¯è¯»æ€§ã€‚ä½¿ç”¨ name å±æ€§æ¥å‘½åæ’æ§½</li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- åœ¨å­ç»„ä»¶ä¸­ï¼šä½¿ç”¨nameå±æ€§ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- åœ¨çˆ¶ç»„ä»¶ä¸­ï¼šVue3éœ€è¦åœ¨templateä¸­ä½¿ç”¨ æ ¼å¼ï¼šv-slot:slotName --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>header</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- æœ‰ç®€å†™å½¢å¼å³ï¼š#header æ²¡æœ‰åå­—çš„å³ä¸ºé»˜è®¤æ’æ§½ #default --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li>åŠ¨æ€æ’æ§½ï¼šå¯ä»¥å°†çˆ¶ç»„ä»¶çš„å†…å®¹åŠ¨æ€æ¸²æŸ“åˆ°å­ç»„ä»¶æ’æ§½ä¸­ã€‚</li></ol> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token comment">&lt;!-- çˆ¶ç»„ä»¶ä¸­ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>[dynamicSlotName]</span><span class="token punctuation">&gt;</span></span>
  æˆ‘æ˜¯åŠ¨æ€æ’æ§½
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> dynamicSlotName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;header&quot;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="3"><li><p>æ’æ§½ä¼ å€¼ã€‚ä¸€èˆ¬æƒ…å†µä¸‹çˆ¶å­ç»„ä»¶æ’æ§½åªèƒ½è®¿é—®çˆ¶ç»„ä»¶çš„å±æ€§ã€‚å¦‚ä¸ŠåŠ¨æ€æ’æ§½ã€‚</p> <p>å½“æ’æ§½æƒ³è¦è®¿é—®å­ç»„ä»¶çš„å±æ€§çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ $slot$ è¿›è¡Œä¼ é€’ã€‚</p></li></ol> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token comment">&lt;!-- ç”±å­ç»„ä»¶ä¼ é€’ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tree<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>

const content = ref<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>('å¾å­çµ„ä»¶çš„æ’æ§½ä¼ é€’çš„è®Šé‡')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- çˆ¶ç»„ä»¶æ¥æ”¶ slotProps å¹¶ä½¿ç”¨ï¼ŒslotProps å¯ä»¥è¯»å–åˆ°åå­—ä¸º tree æ’æ§½ä¸Šæ‰€æœ‰çš„å±æ€§ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Tree</span> <span class="token attr-name">:tree-data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tree<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>tree</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slotProps<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- ä¹Ÿå¯ä»¥ä½¿ç”¨ç®€å†™å½¢å¼ #tree=&quot;slotProps&quot; --&gt;</span>
    {{ slotProps.content }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Tree</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>card-section<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>card-section__content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- å…·åæ’æ§½ ä½¿ç”¨åœ¨templateä¸‹ v-slot:content ç®€å†™å½¢å¼ #content --&gt;</span>
    <span class="token comment">&lt;!-- åŠ¨æ€æ’æ§½åï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ï¼šv-slot:[slotName] åŒ #[slotName] --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_6-4-å¼‚æ­¥ç»„ä»¶"><a href="#_6-4-å¼‚æ­¥ç»„ä»¶" class="header-anchor">#</a> 6.4 å¼‚æ­¥ç»„ä»¶</h3> <blockquote><ol><li>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ‹†åˆ†åº”ç”¨ä¸ºæ›´å°çš„å—ï¼Œä»¥å‡å°‘ä¸»åŒ…çš„é¢ç§¯ã€‚å¹¶ä»…åœ¨éœ€è¦æ—¶å†ä»æœåŠ¡å™¨åŠ è½½ç›¸å…³ç»„ä»¶ã€‚</li> <li>public æ–‡ä»¶å¤¹ä¸‹æ˜¯ä¸ä¼šè¢«ç¼–è¯‘ï¼Œè¿˜å¯ä»¥ç›´æ¥è®¿é—®åˆ°ã€‚</li></ol></blockquote> <p><img src="https://gitee.com/zhizhu_wlz/image-for-md/raw/master/image-20231223233552113.png" alt="image-20231223233552113"></p> <p><strong>å®ç°å¼‚æ­¥ç»„ä»¶ï¼ˆå†…å®¹ä¸éª¨æ¶å±äº¤æ¢ï¼‰</strong></p> <p>æ•ˆæœï¼š</p> <ol><li>éª¨æ¶å±ï¼š</li></ol> <p><img src="https://gitee.com/zhizhu_wlz/image-for-md/raw/master/skeleton.png" alt="image-20231224152150342"></p> <ol start="2"><li>å¼‚æ­¥è¯·æ±‚çš„å†…å®¹ï¼š</li></ol> <p><img src="https://gitee.com/zhizhu_wlz/image-for-md/raw/master/image-20231224152341461.png" alt="image-20231224152341461"></p> <p>æ€è·¯ï¼š</p> <ol><li>æ¨¡æ‹Ÿ ajax è¯·æ±‚ public æ–‡ä»¶å¤¹ä¸‹çš„ data.jsonã€‚</li></ol> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;nickName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Toxic19&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;å®ä¹ ä¸­&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;../assets/avatar.jpg&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Vue å®ç°äº†ä¸€å¥—å†…å®¹åˆ†å‘çš„ APIï¼Œå°† &lt;slot&gt; å…ƒç´ ä½œä¸ºæ‰¿è½½åˆ†å‘å†…å®¹çš„å‡ºå£ï¼Œä½¿ç”¨æ’æ§½ä½¿å¾—vueç»„ä»¶çš„è®¾è®¡æ›´åŠ çµæ´»ã€‚2åœ¨vueç‰ˆæœ¬æ›´è¿­ä¸­ï¼Œå°½ç®¡æ’æ§½çš„ä½¿ç”¨è¯­æ³•æœ‰éƒ¨åˆ†å˜åŒ–ï¼Œæ’æ§½çš„æ ¸å¿ƒç”¨æ³•å¹¶æœªæ”¹å˜ï¼Œé‰´äºvue2å°†åœ¨2023å¹´ç¬¬ä¸å†ç»´æŠ¤ï¼Œä»¥ä¸‹æˆ‘ä»¬å°†å›´ç»•vue3å¯¹æ’æ§½çš„å…·ä½“ä½¿ç”¨æ–¹æ³•è¿›è¡Œå±•å¼€ã€‚&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token generic-function"><span class="token function">get</span> <span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span>
        xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
              <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'null'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// readyState</span>
<span class="token comment">// 0 - æœªåˆå§‹åŒ– è¿˜æ²¡æœ‰è°ƒç”¨sendæ–¹æ³•</span>
<span class="token comment">// 1 - è½½å…¥ å·²è°ƒç”¨sendæ–¹æ³•ï¼Œæ­£åœ¨å‘é€è¯·æ±‚</span>
<span class="token comment">// 2 - è½½å…¥å®Œæˆ sendæ‰§è¡Œå®Œæˆ å·²ç»æ¥æ”¶åˆ°å…¨éƒ¨å“åº”ä¿¡æ¯</span>
<span class="token comment">// 3 - äº¤äº’ è§£æå“åº”å†…å®¹</span>
<span class="token comment">// 4 - å®Œæˆ å“åº”å†…å®¹è§£æå®Œæˆ å¯ä»¥åœ¨å®¢æˆ·ç«¯è°ƒç”¨</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ol start="2"><li>åœ¨å­ç»„ä»¶å¼‚æ­¥è¯·æ±‚ï¼š</li></ol> <blockquote><p>åœ¨ $setup$ è¯­æ³•ç³–ä¸­ï¼šå¯ä»¥ä½¿ç”¨é¡¶å±‚ await ã€‚ç»“æœä»£ç ä¼šè¢«ç¼–è¯‘ä¸º <code>async setup()</code></p></blockquote> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> axios <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/server/axios&quot;</span>
<span class="token keyword">interface</span> <span class="token class-name">Data</span> <span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    nickName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span>Data<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'/data.json'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol start="3"><li>çˆ¶ç»„ä»¶å¼‚æ­¥å¯¼å…¥å­ç»„ä»¶ Card.vue</li></ol> <blockquote><p>suspense é»˜è®¤ç»„ä»¶ï¼š</p> <ol><li>æœ‰ä¸¤ä¸ªæ’æ§½ï¼Œéƒ½åªæ¥æ”¶ä¸€ä¸ªç›´æ¥å­èŠ‚ç‚¹ã€‚</li> <li>default æ’æ§½é‡Œçš„èŠ‚ç‚¹ä¼šå°½å¯èƒ½çš„å±•ç¤ºå‡ºæ¥ã€‚å¦‚æœä¸èƒ½å°±ä¼šå±•ç¤º fallback æ’æ§½ä¸­çš„èŠ‚ç‚¹ã€‚</li> <li><code>async setup()</code> å¿…é¡»ä¸ <a href="https://cn.vuejs.org/guide/built-ins/suspense.html" target="_blank" rel="noopener noreferrer">Suspense <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>å†…ç½®ç»„ä»¶ç»„åˆä½¿ç”¨ï¼ŒSuspense ç›®å‰è¿˜æ˜¯å¤„äºå®éªŒé˜¶æ®µçš„ç‰¹æ€§ï¼Œä¼šåœ¨å°†æ¥çš„ç‰ˆæœ¬ä¸­ç¨³å®šã€‚</li></ol> <p>defineAsyncComponentï¼š</p> <ol><li>å¾—åˆ°çš„ CardSync æ˜¯ä¸€ä¸ªå¤–å±‚åŒ…è£…è¿‡çš„ç»„ä»¶ã€‚ä»…åœ¨é¡µé¢éœ€è¦å®ƒæ¸²æŸ“æ—¶æ‰ä¼šè°ƒç”¨åŠ è½½å†…éƒ¨å®é™…ç»„ä»¶çš„å‡½æ•°ã€‚</li> <li>å®ƒå°†æ¥æ”¶åˆ°çš„ props å’Œ æ’æ§½ä¼ ç»™å†…éƒ¨ç»„ä»¶ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªå¼‚æ­¥çš„åŒ…è£…ç»„ä»¶æ— ç¼æ›¿æ¢åŸå§‹ç»„ä»¶ï¼Œ
åŒæ—¶å®ç°å»¶è¿ŸåŠ è½½ã€‚</li></ol></blockquote> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// ä½¿ç”¨ defineAsyncComponent åŠ è½½å¼‚æ­¥é…åˆ import å‡½æ•°å¯ä»¥å®ç°ä»£ç åˆ†åŒ…</span>
<span class="token keyword">const</span> CardSync <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./components/Card.vue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>suspense</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CardSync</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CardSync</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#fallback</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Skeleton</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Skeleton</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- åœ¨ç½‘ç»œåŠ è½½è¿‡ç¨‹ä¸­å±•ç¤ºçš„ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯loadingå›¾æ ‡ä¹‹ç±»çš„ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>suspense</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_6-5-teleport"><a href="#_6-5-teleport" class="header-anchor">#</a> 6.5 <a href="https://cn.vuejs.org/guide/built-ins/teleport.html" target="_blank" rel="noopener noreferrer">Teleport<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>Teleportæ ‡ç­¾å¿…é¡»å†™åœ¨å¾…è¿›å…¥çš„å…ƒç´ åé¢ï¼Œéœ€è¦è¿™ä¸ªå…ƒç´ åˆ›å»ºå¥½äº†æ‰èƒ½ä¼ è¾“ã€‚</p> <blockquote><p>åº”ç”¨åœºæ™¯ï¼šå…¨å±çš„æ¨¡æ€æ¡†ã€‚</p> <p>è§¦å‘æ¨¡æ€æ¡†çš„æŒ‰é’®åœ¨å†…éƒ¨ç»„ä»¶ä¸­å¯ä»¥ä½¿ç”¨å…¶ä»–çš„ data ä»¥åŠ propsï¼Œä½†æ˜¯ä»è§†å›¾çš„è§’åº¦æ¥çœ‹ï¼Œåœ¨ Vue åº”ç”¨çš„èŒƒå›´ä¹‹å¤–æ¸²æŸ“å®ƒã€‚</p> <p>Teleport å¯ä»¥å°†æ¨¡æ¿æ¸²æŸ“åˆ°æŒ‡å®š dom èŠ‚ç‚¹ï¼Œä¸å—çˆ¶çº§CSSçš„å½±å“ã€‚</p></blockquote> <h3 id="_6-6-keepalive"><a href="#_6-6-keepalive" class="header-anchor">#</a> 6.6 <a href="https://cn.vuejs.org/guide/built-ins/keep-alive.html" target="_blank" rel="noopener noreferrer">KeepAlive<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <h4 id="_1-component"><a href="#_1-component" class="header-anchor">#</a> ğŸ¥€ 1. <a href="https://cn.vuejs.org/api/built-in-special-elements.html#component" target="_blank" rel="noopener noreferrer">component<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <ol><li>ä¸æ˜¯çœŸæ­£çš„ç»„ä»¶ï¼Œå’Œ slot ä»¥åŠ template ä¸€æ ·ä¹Ÿæ˜¯æ¨¡æ¿è¯­æ³•çš„ä¸€éƒ¨åˆ†ã€‚ä¼šåœ¨ç¼–è¯‘è¿‡ç¨‹è¢«ç¼–è¯‘æ‰ã€‚</li> <li>ç”± prop <code>is</code> å†³å®šè¦æ¸²æŸ“çš„çœŸæ­£ç»„ä»¶ã€‚</li> <li><a href="https://cn.vuejs.org/api/built-in-components.html" target="_blank" rel="noopener noreferrer">å†…ç½®ç»„ä»¶<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>éƒ½å¯ä»¥ä¼ é€’ç»™ <code>is</code>ï¼Œä½†æ˜¯å¦‚æœæƒ³é€šè¿‡åç§°ä¼ é€’åˆ™å¿…é¡»å…ˆå¯¹å…¶è¿›è¡Œæ³¨å†Œã€‚</li></ol> <p>ä¸€èˆ¬ä½¿ç”¨<code>component</code>åšåŠ¨æ€ç»„ä»¶ã€‚</p> <h4 id="_2-keep-alive"><a href="#_2-keep-alive" class="header-anchor">#</a> ğŸ¥€ 2.  keep-alive</h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>view<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>**é»˜è®¤æƒ…å†µä¸‹ï¼š**ä¸€ä¸ªç»„ä»¶å®ä¾‹è¢«æ›¿æ¢æ‰ä¼šè¢«é”€æ¯ï¼Œä¼šå¯¼è‡´ä¸¢å¤±æ‰€æœ‰å·²å˜åŒ–çš„çŠ¶æ€ã€‚æ¯æ¬¡æ˜¾ç¤ºéƒ½æ˜¯ä¸€ä¸ªåªæœ‰åˆå§‹çŠ¶æ€çš„æ–°å®ä¾‹ã€‚</p> <blockquote><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼šæœ‰æ—¶ä¸å¸Œæœ›ç»„ä»¶è¢«é‡æ–°æ¸²æŸ“å½±å“ä½¿ç”¨ä½“éªŒï¼›æˆ–è€…å¤„äºæ€§èƒ½è€ƒè™‘ï¼Œé¿å…å¤šæ¬¡é‡å¤æ¸²æŸ“é™ä½æ€§èƒ½ã€‚</p> <p>è€Œæ˜¯å¸Œæœ›ç»„ä»¶å¯ä»¥ç¼“å­˜ä¸‹æ¥ï¼Œç»´æŒå½“å‰çš„çŠ¶æ€ã€‚è¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°<code>keep-alive</code>ç»„ä»¶ã€‚</p></blockquote> <p>**ç”Ÿå‘½å‘¨æœŸï¼š**ç›¸æ¯”æ™®é€šç»„ä»¶ï¼Œå¤šäº† <code>onActivated</code> <code>onDeactivated</code></p> <ol><li><p>åˆæ¬¡è¿›å…¥ï¼šonMounted  =&gt; onActivated</p></li> <li><p>é€€å‡ºæ—¶è§¦å‘ onDeactivated</p></li> <li><p>å†æ¬¡è¿›å…¥æ—¶åªä¼šè§¦å‘ onActivatedã€‚</p> <p>ç»¼ä¸Šï¼šå¯¹äºäº‹ä»¶æŒ‚è½½çš„æ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡çš„æ”¾åœ¨ onMounted ä¸­ã€‚æ¯æ¬¡éƒ½æ‰§è¡Œå°± onActivatedã€‚</p></li></ol> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token function">onActivated</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;keep-aliveåˆå§‹åŒ–&quot;</span><span class="token punctuation">)</span> <span class="token comment">// åœ¨onMountedä¹‹åæ‰§è¡Œ</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">onDeactivated</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;keep-aliveå¸è½½&quot;</span><span class="token punctuation">)</span> <span class="token comment">// æ¯æ¬¡åˆ‡æ¢å°±åªä¼šè§¦å‘ onActivated å’Œ onDeactivated</span>
                               <span class="token comment">// ä¸ä¼šå»è§¦å‘ onUnMounted() å¸è½½ç”Ÿå‘½å‘¨æœŸäº†</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>include / excludeï¼š</strong></p> <p>å‰æï¼š<code>KeepAlive</code>ç»„ä»¶é»˜è®¤ä¼šç¼“å­˜å†…éƒ¨çš„æ‰€æœ‰ç»„ä»¶å®ä¾‹ã€‚å¯ä»¥é€šè¿‡ include å’Œ exclude æ¥é™åˆ¶ç¼“å­˜çš„ç»„ä»¶ã€‚</p> <p>ä½¿ç”¨çš„æ˜¯ Vue æ–‡ä»¶åå–”ï¼</p> <h4 id="_3-transition"><a href="#_3-transition" class="header-anchor">#</a> ğŸ¥€ 3. <a href="https://cn.vuejs.org/guide/built-ins/transition.html#the-transition-component" target="_blank" rel="noopener noreferrer">transition<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <p>**ä½¿ç”¨å‰æï¼š**ä»…æ”¯æŒå•ä¸ªå…ƒç´ æˆ–ç»„ä»¶ä½œä¸ºæ’æ§½å†…å®¹ã€‚</p> <ol><li>ç”± <code>v-if</code> å’Œ <code>v-show</code> è§¦å‘çš„åˆ‡æ¢</li> <li>ç”± ç‰¹æ®Šå…ƒç´  <code>component</code> åˆ‡æ¢çš„åŠ¨æ€ç»„ä»¶</li> <li>æ”¹å˜ç‰¹æ®Šçš„ <code>key</code> å±æ€§</li></ol> <p><strong>é…ç½® <a href="https://animate.style/" target="_blank" rel="noopener noreferrer"><code>animate.css</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> åº“ä½¿ç”¨ï¼š</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> animate.css <span class="token parameter variable">--save</span>
<span class="token function">npm</span> <span class="token function">install</span> animate.css <span class="token parameter variable">--save</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">:duration</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enter-active-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>animate__animated animate__fadeIn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token comment">&lt;!-- æ¯ä¸ªä½¿ç”¨éƒ½éœ€è¦å£°æ˜ï¼šanimate__animated --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- ä½¿ç”¨appearå±æ€§ï¼šé¡µé¢ä¸€æ—¦åŠ è½½å®Œæˆå°±ä¼šè§¦å‘transition --&gt;</span>
<span class="token comment">&lt;!-- é…å¥—classå±æ€§ï¼šappear-from-class appear-active-class appear-to-class --&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>è¿‡æ¸¡è¿‡ç¨‹ä¸­çš„é’©å­å‡½æ•°ï¼š</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Transition</span>
  <span class="token attr-name">@before-enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onBeforeEnter<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onEnter<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@after-enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onAfterEnter<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@enter-cancelled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onEnterCancelled<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@before-leave</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onBeforeLeave<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@leave</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onLeave<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@after-leave</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onAfterLeave<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@leave-cancelled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onLeaveCancelled<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- ... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Transition</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_4-transition-group"><a href="#_4-transition-group" class="header-anchor">#</a> ğŸ¥€ 4. <a href="https://cn.vuejs.org/guide/built-ins/transition-group.html" target="_blank" rel="noopener noreferrer">transition-group<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <p>æ˜¯ä¸€ä¸ªå†…ç½®ç»„ä»¶ï¼Œç”¨äºå¯¹ <code>v-for</code> åˆ—è¡¨ä¸­çš„å…ƒç´ æˆ–ç»„ä»¶çš„æ’å…¥ã€ç§»é™¤å’Œé¡ºåºæ”¹å˜æ·»åŠ åŠ¨ç”»æ•ˆæœã€‚æ¯”å¦‚ï¼šdragList ?</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition-group</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ul<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- æ„å‘³ç€åœ¨å­ç»„ä»¶å¤–æ¸²æŸ“äº†ulåˆ—è¡¨ --&gt;</span>
  ...code
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition-group</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_6-7-antd"><a href="#_6-7-antd" class="header-anchor">#</a> 6.7 <a href="https://antdv.com/docs/vue/introduce-cn" target="_blank" rel="noopener noreferrer">AntD<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <ol><li>ä¸‹è½½</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> ant-design-vue@4.x
<span class="token function">npm</span> <span class="token function">install</span> unplugin-vue-components <span class="token parameter variable">-D</span> <span class="token comment"># ç”¨äºviteé¡¹ç›®æŒ‰éœ€å¯¼å…¥</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li><p>å®˜ç½‘é“¾æ¥ï¼š<a href="https://antdv.com/docs/vue/introduce-cn#%E8%87%AA%E5%8A%A8%E6%8C%89%E9%9C%80%E5%BC%95%E5%85%A5%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">è‡ªåŠ¨æŒ‰éœ€å¼•å…¥ç»„ä»¶ <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>åœ¨ vite.config.ts ä¸­æ·»åŠ ï¼šComponents éƒ¨åˆ†</p></li></ol> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// æ”¯æŒVueè§£æ</span>
    <span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// æŒ‰éœ€å¯¼å…¥antD</span>
      resolvers<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">AntDesignVueResolver</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          importStyle<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ol start="4"><li>ä¿®æ”¹æ ·å¼ï¼š<a href="https://juejin.cn/post/7211081639620198437#heading-2" target="_blank" rel="noopener noreferrer">ä¿®æ”¹Antdé»˜è®¤æ ·å¼æ€»ç»“ - æ˜é‡‘ (juejin.cn)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">:global(.ant-tabs &gt; .ant-tabs-nav)</span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0 <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_6-8-provide-inject"><a href="#_6-8-provide-inject" class="header-anchor">#</a> 6.8 <a href="https://cn.vuejs.org/api/composition-api-dependency-injection.html#provide" target="_blank" rel="noopener noreferrer"><code>provide / inject</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä¾èµ–æ³¨å…¥ï¼šå½“æ·±åº¦åµŒå¥—çš„ç»„ä»¶éœ€è¦çˆ¶ç»„ä»¶çš„å±æ€§æ—¶ï¼šprovide å¯ä»¥åœ¨ç¥–å…ˆç»„ä»¶ä¸­æŒ‡å®šæˆ‘ä»¬æƒ³è¦<strong>æä¾›</strong>ç»™åä»£ç»„ä»¶çš„æ•°æ®æˆ–æ–¹æ³•</p> <p>è€Œåœ¨ä»»ä½•åä»£ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨ inject æ¥æ¥æ”¶ provide <strong>æä¾›</strong>çš„æ•°æ®æˆ–æ–¹æ³•ã€‚</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// åœ¨ç¥–å…ˆç»„ä»¶ä¸­å£°æ˜ provide ä¸¤ä¸ªå‚æ•° key å’Œ æ³¨å…¥çš„å€¼</span>
<span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">)</span> <span class="token comment">// provide éœ€è¦åœ¨ setup åŒé˜¶æ®µä½¿ç”¨</span>

<span class="token keyword">const</span> colorVal <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'yellow'</span><span class="token punctuation">)</span>
<span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">,</span> colorVal<span class="token punctuation">)</span> <span class="token comment">// å¯ä»¥æ˜¯å“åº”å¼çš„å˜é‡</span>

<span class="token comment">// ä¹Ÿå¯ä»¥å°†Symbolä½œä¸ºkey</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// åœ¨åä»£ç»„ä»¶ä¸­ï¼š</span>
<span class="token comment">// å¦‚æœç¥–å…ˆç»„ä»¶ä¼ é€’çš„åªæ˜¯æ™®é€šå€¼ï¼Œæ¥æ”¶æ—¶éœ€è¦é€šè¿‡refæˆ–reactiveæ¥æ·»åŠ å“åº”å¼</span>
<span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token generic-function"><span class="token function">inject</span><span class="token generic class-name"><span class="token operator">&lt;</span>Ref<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">)</span> <span class="token comment">// åé¢å¯ä»¥æ¥é»˜è®¤å€¼</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>åä»£ç»„ä»¶æ¥æ”¶å€¼ï¼Œä¿®æ”¹ä¼šå½±å“ç¥–å…ˆç»„ä»¶ä¸­çš„è¯¥å€¼ã€‚</p> <p>å¯ä»¥é€šè¿‡ <code>readonly</code> æ¥æ§åˆ¶åªè¯»ï¼š<code>provide('color', readonly(colorVal))</code></p> <h2 id="_7-ä½¿ç”¨-v-md-editor"><a href="#_7-ä½¿ç”¨-v-md-editor" class="header-anchor">#</a> 7. ä½¿ç”¨ <a href="https://ckang1229.gitee.io/vue-markdown-editor/zh/" target="_blank" rel="noopener noreferrer">v-md-editor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>å‚è€ƒé“¾æ¥ï¼š</p> <ol><li><a href="https://blog.csdn.net/wobuxiangxin1314/article/details/129336928" target="_blank" rel="noopener noreferrer">Vueè„šæ‰‹æ¶Typescriptä½¿ç”¨Markdownç¼–è¾‘å™¨v-md-editorè®°å½•<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.jianshu.com/p/6071dc9548f0" target="_blank" rel="noopener noreferrer">åŸºäºv-md-editorçš„åœ¨çº¿æ–‡æ¡£ç¼–è¾‘å®ç°<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <h2 id="_8-æ·±å…¥-v-model"><a href="#_8-æ·±å…¥-v-model" class="header-anchor">#</a> 8. æ·±å…¥ <code>v-model</code></h2> <p>v-model å…¶å®æ˜¯ä¸€ä¸ªè¯­æ³•ç³– é€šè¿‡ props å’Œ emit ç»“åˆè€Œæˆçš„ã€‚</p> <p>ä½¿ç”¨ <code>v-model</code> å’Œ <code>emit</code> å®ç°çˆ¶å­ç»„ä»¶çš„åŒå‘æ•°æ®æµåŠ¨ã€‚</p> <ol><li>çˆ¶ç»„ä»¶</li></ol> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token comment">&lt;!-- åœ¨Vue3ä¸­ v-modelé»˜è®¤ç»‘å®šçš„propså€¼ä¸º modelValue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">v-model:</span>content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Son</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> show <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span>Boolean<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// é»˜è®¤trueæ‰“å¼€</span>
<span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;Vue3ä¸­å¯ä»¥ä¼ é€’å¤šä¸ªv-modelï¼Œé»˜è®¤propsæ˜¯modelValueï¼›å†ä¼ é€’çš„æ—¶å€™å°±å¾—æŒ‡å®šäº†ï¼Œæ­¤åˆ»æˆ‘ä»¬æŒ‡å®šçš„æ˜¯content&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>å­ç»„ä»¶</li></ol> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token comment">&lt;!-- Sonå­ç»„ä»¶ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span> ä½¿ç”¨definePropsæ¥æ”¶çˆ¶ç»„ä»¶é€šè¿‡v-modelä¼ é€’è¿‡æ¥çš„å€¼: {{propsData.modelValue}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span> {{propsData.content}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Props</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
	modelValue<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token comment">// è¿™ä¸ªæ˜¯é»˜è®¤çš„å€¼</span>
	content<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">// å¤šä¸ªv-modelè‡ªå®šä¹‰çš„</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> propsData <span class="token operator">=</span> <span class="token generic-function"><span class="token function">defineProps</span><span class="token generic class-name"><span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// ä»¥ä¸Šå®ç°äº†v-modelä»çˆ¶ç»„ä»¶åˆ°å­ç»„ä»¶çš„ä¼ é€’</span>
<span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'update:modelValue'</span><span class="token punctuation">,</span> <span class="token string">'update:content'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// å®šä¹‰è‡ªå®šä¹‰äº‹ä»¶</span>
<span class="token keyword">const</span> <span class="token function-variable function">close</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// è§¦å‘äº‹ä»¶</span>
  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'update:modelValue'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// å®ç°å­ç»„ä»¶å†…å®¹å‘çˆ¶ç»„ä»¶ä¼ å€¼</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_9-è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#_9-è‡ªå®šä¹‰æŒ‡ä»¤" class="header-anchor">#</a> 9. <a href="https://cn.vuejs.org/guide/reusability/custom-directives.html#custom-directives" target="_blank" rel="noopener noreferrer">è‡ªå®šä¹‰æŒ‡ä»¤<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>å†…ç½®æŒ‡ä»¤å¦‚ï¼š<code>v-show</code> <code>v-if</code> <code>v-on</code> ç­‰ç­‰</p> <p>è‡ªå®šä¹‰æŒ‡ä»¤ä¸»è¦æ˜¯ä¸ºäº†é‡ç”¨æ¶‰åŠæ™®é€šå…ƒç´ çš„åº•å±‚ DOM è®¿é—®çš„é€»è¾‘ã€‚</p> <p>ä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤ç”±ä¸€ä¸ªåŒ…å«<strong>ç±»ä¼¼ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­</strong>çš„å¯¹è±¡æ¥å®šä¹‰ã€‚</p> <p><img src="https://gitee.com/zhizhu_wlz/image-for-md/raw/master/image-20240114162808820.png" alt="image-20240114162808820"></p> <p>Vue2 æŒ‡ä»¤ <code>bind inserted update componentUpdated unbind</code></p> <blockquote><p>åªæœ‰å½“æ‰€éœ€åŠŸèƒ½ <u>åªèƒ½é€šè¿‡ç›´æ¥çš„ DOM æ“ä½œæ¥å®ç°</u> æ—¶ï¼Œæ‰åº”è¯¥ä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤ã€‚è‡ªå®šä¹‰æŒ‡ä»¤å±äºç ´åæ€§æ›´æ–°ã€‚</p></blockquote> <h3 id="_9-1-æƒé™æŒ‰é’®æ§åˆ¶"><a href="#_9-1-æƒé™æŒ‰é’®æ§åˆ¶" class="header-anchor">#</a> 9.1. æƒé™æŒ‰é’®æ§åˆ¶</h3> <p>RBAC æ¨¡å¼ï¼šæƒé™é€šè¿‡ userId æˆ–è€… token æ¥åˆ¤æ–­ã€‚</p> <p>æƒé™ç»†åŒ–ä¸ºï¼šèœå• | é¡µé¢ | æŒ‰é’®ï¼ˆæ­¤æ¬¡çš„è‡ªå®šä¹‰æŒ‡ä»¤ï¼‰ | å­—æ®µ</p> <p>ä¸€èˆ¬æŒ‰é’®æƒé™æ§åˆ¶ï¼šæ˜¯ä½¿ç”¨ <code>v-if</code> æˆ–è€… ç›´æ¥åˆ é™¤è¯¥èŠ‚ç‚¹ã€‚</p> <p><img src="https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202401152139225.png" alt="image-20240115213910988"></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span>Directive<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token keyword">const</span> rolesInfo <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  roles<span class="token operator">:</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">&quot;ç®¡ç†å‘˜&quot;</span><span class="token punctuation">,</span>
  authorities<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// &quot;pos:category:list&quot;,&quot;s ystem:user:list&quot;, &quot;system:menu:list&quot;, &quot;system:role:list&quot;</span>
    <span class="token comment">// æ¨¡å—:é¡µé¢:æ“ä½œ</span>
    <span class="token string">&quot;pos:product:edit&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pos:product:delete&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pos:product:create&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> vHasShow<span class="token operator">:</span> Directive<span class="token operator">&lt;</span>HTMLElement<span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> bindings<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token operator">=</span> bindings
  <span class="token comment">// åˆ¤æ–­valueçš„ä¼ å€¼</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&amp;&amp;</span> value <span class="token keyword">instanceof</span> <span class="token class-name"><span class="token builtin">Array</span></span> <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hasAuthorities <span class="token operator">=</span> rolesInfo<span class="token punctuation">.</span>authorities<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>permission <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>permission<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hasAuthorities<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span>parentNode <span class="token operator">&amp;&amp;</span> el<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token comment">// ç›´æ¥ç§»é™¤domå…ƒç´ ã€‚</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- ä¼ é€’ç»™æŒ‡ä»¤çš„bindingsçš„valueå³ä¸º['']æ•°ç»„å­—ç¬¦ä¸² --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-button</span> <span class="token attr-name">v-has-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>['pos:product:edit']<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>åˆ›å»º<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-button</span> <span class="token attr-name">v-has-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>['pos:sale:list']<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç¼–è¾‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-button</span> <span class="token attr-name">v-has-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>['pos:product:delete']<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_9-2-åˆ—è¡¨æ‹–æ‹½æŒ‡ä»¤"><a href="#_9-2-åˆ—è¡¨æ‹–æ‹½æŒ‡ä»¤" class="header-anchor">#</a> 9.2. åˆ—è¡¨æ‹–æ‹½æŒ‡ä»¤</h3> <p><img src="https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202401181942991.png" alt="image-20240118194249787"></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">dragItem</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// æ¯ä¸€ä¸ªæ‹–æ‹½é¡¹ç›®çš„å±æ€§</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  menuName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  menuUrl<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  userId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  sortNum<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> dragList <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span>dragItem<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// æ‹–æ‹½åˆ—è¡¨çš„å®¹å™¨</span>
<span class="token keyword">const</span> parentNode <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">getList</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>data<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/drag-list.json'</span><span class="token punctuation">)</span>
  dragList<span class="token punctuation">.</span>value <span class="token operator">=</span> data
<span class="token punctuation">}</span>
<span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> vDrag<span class="token operator">:</span> <span class="token function-variable function">Directive</span> <span class="token operator">=</span> <span class="token punctuation">(</span>el<span class="token operator">:</span> HTMLElement<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> dragEl<span class="token operator">:</span> HTMLElement <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// æ‹–æ‹½å…ƒç´ </span>
  <span class="token keyword">let</span> targetEl<span class="token operator">:</span> HTMLElement <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// ç›®æ ‡å…ƒç´ </span>
  
  <span class="token comment">// _index: åˆ¤æ–­è¯¥DOMå…ƒç´ åœ¨æ‰€æœ‰æ‹–æ‹½å…ƒç´ çš„ç´¢å¼•</span>
  <span class="token keyword">const</span> <span class="token function-variable function">_index</span> <span class="token operator">=</span> <span class="token punctuation">(</span>element<span class="token operator">:</span> HTMLElement<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> domData <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>parentNode<span class="token punctuation">.</span>value<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span>
    <span class="token keyword">return</span> domData<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dom<span class="token operator">:</span> HTMLElement<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> dom<span class="token punctuation">.</span>innerText <span class="token operator">==</span> element<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// è®¾ç½®è¿‡æ¸¡çš„åŠ¨ç”»æ•ˆæœ - å¯¹domå…ƒç´ è¿›è¡Œå¤„ç†</span>
  <span class="token keyword">const</span> <span class="token function-variable function">_anim</span> <span class="token operator">=</span> <span class="token punctuation">(</span>startPosition<span class="token punctuation">,</span> dom<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// é¦–å…ˆç«‹å³ç§»åŠ¨ä¸€ä¸ªDOMå…ƒç´ ï¼Œç„¶ååœ¨å…¶åçš„0.3ç§’å†…å¹³æ»‘åœ°ç§»åŠ¨å›å…¶åŸå§‹ä½ç½®ï¼Œåˆ›å»ºä¸€ä¸ªæ’å…¥æˆ–å åŠ çš„æ•ˆæœã€‚</span>
    <span class="token comment">// åœ¨åŠ¨ç”»å®Œæˆåï¼Œå®ƒä¼šæ¸…é™¤è¿‡æ¸¡æ•ˆæœå¹¶é‡ç½®æ ·å¼ã€‚</span>
    <span class="token keyword">const</span> offset <span class="token operator">=</span> startPosition <span class="token operator">-</span> dom<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top
    dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">'none'</span> 								  <span class="token comment">// ç¦ç”¨ç°æœ‰çš„è¿‡æ¸¡æ•ˆæœ</span>
    dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translateY(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>offset<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span> <span class="token comment">// å‚ç›´ç§»åŠ¨</span>

    dom<span class="token punctuation">.</span>offsetWidth <span class="token comment">// å¼ºåˆ¶æµè§ˆå™¨è§¦å‘é‡ç»˜ï¼›ä¸ºäº†ç¡®ä¿DOMå·²ç»ç§»åŠ¨åˆ°é¢„æœŸçš„ä½ç½®ã€‚</span>
    dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">'transform .3s'</span>
    dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>dom<span class="token punctuation">.</span>animated<span class="token punctuation">)</span>

    <span class="token comment">// åŠ¨ç”»å®Œæˆåæ¸…é™¤è¿‡æ¸¡æ•ˆæœå¹¶é‡ç½®æ ·å¼</span>
    dom<span class="token punctuation">.</span>animated <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">''</span>
      dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>
      dom<span class="token punctuation">.</span>animated <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// å¼€å§‹æ‹–æ‹½</span>
  <span class="token keyword">const</span> <span class="token function-variable function">dragStart</span> <span class="token operator">=</span> e <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    dragEl <span class="token operator">=</span> e<span class="token punctuation">.</span>target
  <span class="token punctuation">}</span>
  
  <span class="token comment">// æ‹–æ‹½è¿‡ç¨‹</span>
  <span class="token keyword">const</span> <span class="token function-variable function">dragOver</span> <span class="token operator">=</span> e <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. ç¡®ä¿æ‹–æ‹½å…ƒç´ å’Œç›®æ ‡å…ƒç´ çš„å­˜åœ¨</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token comment">// æ£€æŸ¥ç›®æ ‡å…ƒç´ æ˜¯å¦å­˜åœ¨</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dragEl<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token comment">// æ£€æŸ¥æ‹–æ‹½å…ƒç´ æ˜¯å¦å­˜åœ¨</span>
    targetEl <span class="token operator">=</span> e<span class="token punctuation">.</span>target
    <span class="token keyword">const</span> targetTop <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token operator">?.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?.</span>top
    <span class="token keyword">const</span> dragTop <span class="token operator">=</span> dragEl<span class="token operator">?.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?.</span>top
    <span class="token comment">// 2. æ£€æŸ¥ç›®æ ‡å…ƒç´ æ˜¯å¦liå…ƒç´ ä¸”ä¸æ˜¯æ‹–æ‹½å…ƒç´ </span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>targetEl<span class="token operator">?.</span>nodeName <span class="token operator">===</span> <span class="token string">&quot;LI&quot;</span> <span class="token operator">&amp;&amp;</span> targetEl <span class="token operator">!==</span> dragEl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>targetEl <span class="token operator">&amp;&amp;</span> targetEl<span class="token punctuation">[</span><span class="token string">&quot;animated&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
      <span class="token comment">// 3. æ ¹æ®è¢«æ‹–æ‹½å…ƒç´ å’Œç›®æ ‡å…ƒç´ çš„é¡ºåºï¼Œå†³å®šæ’å…¥ä½ç½®</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">_index</span><span class="token punctuation">(</span>dragEl<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">_index</span><span class="token punctuation">(</span>targetEl<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        targetEl<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>dragEl<span class="token punctuation">,</span> targetEl<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        targetEl<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>dragEl<span class="token punctuation">,</span> targetEl<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 4. åŠ¨ç”»å¤„ç† - æ‹–æ‹½å…ƒç´ å’Œç›®æ ‡å…ƒç´ </span>
      <span class="token function">_anim</span><span class="token punctuation">(</span>targetTop<span class="token punctuation">,</span> targetEl<span class="token punctuation">)</span>
      <span class="token function">_anim</span><span class="token punctuation">(</span>dragTop<span class="token punctuation">,</span> dragEl<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ç»“æŸæ‹–æ‹½: ä¸»è¦æ˜¯ä¸ºäº†æ‹¿åˆ°æ–°çš„list å¦åˆ™å¯ä»¥ä¸å†™</span>
  <span class="token keyword">const</span> <span class="token function-variable function">dragEnd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragstart'</span><span class="token punctuation">,</span> dragStart<span class="token punctuation">)</span>
  el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragover'</span><span class="token punctuation">,</span> dragOver<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><p>å‚è€ƒï¼š<a href="https://www.yuque.com/toxic-19/develop/drag" target="_blank" rel="noopener noreferrer">Drag-List (yuque.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>directives-list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>parentNode<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-drag</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) in dragList<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">draggable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">:item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ item.sortNum }} - {{ item.menuName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_9-3-æ‡’åŠ è½½æŒ‡ä»¤"><a href="#_9-3-æ‡’åŠ è½½æŒ‡ä»¤" class="header-anchor">#</a> 9.3. æ‡’åŠ è½½æŒ‡ä»¤</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>directives-images<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- å°†å®é™…çš„å›¾ç‰‡åœ°å€ä¼ é€’ç»™ v-lazy æŒ‡ä»¤ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">v-lazy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img in imageArray<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>394<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// import.meta.globEager: JavaScript ä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œç”¨äºè·å–å½“å‰æ¨¡å—çš„é™æ€å¯¼å…¥ï¼ˆstatic importsï¼‰ä¿¡æ¯</span>
<span class="token comment">// Record&lt;K, T&gt;: è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡ è¯¥å¯¹è±¡çš„é”®å€¼å¯¹éƒ½æ˜¯è”åˆç±»å‹ K T åˆ†åˆ«ä»£è¡¨é”®å€¼çš„ç±»å‹</span>
<span class="token keyword">const</span> imageList<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">default</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">globEager</span><span class="token punctuation">(</span><span class="token string">'../../assets/lazy-images/*.*'</span><span class="token punctuation">)</span> <span class="token comment">// é™æ€èµ„æºåŠ è½½ ç±»ä¼¼äº import XX from &quot;&quot;</span>

<span class="token keyword">const</span> imageArray <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>imageList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>img <span class="token operator">=&gt;</span> img<span class="token punctuation">.</span>default<span class="token punctuation">)</span>

<span class="token keyword">const</span> vLazy<span class="token operator">:</span> Directive<span class="token operator">&lt;</span>HTMLImageElement<span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> bindings<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// å¯ä»¥åœ¨bindingsä¸­çš„valueå¾—åˆ°ä¼ é€’è¿›æ¥çš„å€¼å³ img</span>
  <span class="token keyword">const</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'directives-images'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> defaultImage <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../../assets/vue.svg'</span><span class="token punctuation">)</span>
  el<span class="token punctuation">.</span>src <span class="token operator">=</span> defaultImage<span class="token punctuation">.</span>default <span class="token comment">// è¿˜æ²¡å‡ºç°çš„æ—¶å€™ç»™é»˜è®¤å›¾ç‰‡åœ°å€</span>
  
  <span class="token comment">// IntersectionObserver æ¥æ”¶ä¸¤ä¸ªå‚æ•° callback options</span>
  <span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>entries <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>entries<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>intersectionRatio <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> entries<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isIntersecting<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span>src <span class="token operator">=</span> bindings<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>root<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// åœ¨ options ä¸­å®šä¹‰ç›‘å¬çš„æ ¹å…ƒç´ </span>
  
  observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>å¯ä»¥è§‚å¯Ÿéšç€æ»šåŠ¨æ¡æ»šåŠ¨ï¼Œ å›¾ç‰‡ä¼šæ…¢æ…¢åŠ è½½å‡ºæ¥ï¼š</p> <p><img src="https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202401182234462.png" alt="image-20240118223404911"></p> <h2 id="_10-hook"><a href="#_10-hook" class="header-anchor">#</a> 10. Hook</h2> <blockquote><p>Vue3 è‡ªå®šä¹‰ Hook ä¸»è¦ç”¨æ¥å¤„ç†å¤ç”¨ä»£ç é€»è¾‘çš„å°è£…ã€‚</p> <p>å’Œ Vue2 çš„ Mixins å¯¹æ¯”ï¼š</p> <ol><li>Mixins å°†è¿™äº›å¤šä¸ªç›¸åŒçš„é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼Œå„ä¸ªç»„ä»¶åªéœ€è¦å¼•å…¥mixinsï¼Œå°±èƒ½å®ç°ä¸€æ¬¡å†™ä»£ç ï¼Œå¤šç»„ä»¶å—ç›Šçš„æ•ˆæœã€‚</li> <li>æ¶‰åŠåˆ° data methods ä»¥åŠå…¶ä»–ç”Ÿå‘½å‘¨æœŸçš„åŒåè¦†ç›–ã€‚</li> <li>å˜é‡æ¥æºä¸æ˜ç¡®ã€‚</li></ol></blockquote> <h3 id="_10-1-url-è½¬-base64"><a href="#_10-1-url-è½¬-base64" class="header-anchor">#</a> 10.1. URL è½¬ Base64</h3> <p>éœ€è¦æ³¨æ„çš„æ˜¯åœ¨ url è½¬ Base64 çš„æ—¶å€™ï¼Œéœ€è¦è·å–åˆ°è¯¥å›¾ç‰‡çš„ domã€‚ä¸ºäº†è·å–åˆ°åˆ›å»ºçš„ canvas çš„å®½é«˜ã€‚</p> <p>æ‰€ä»¥å¦‚æœæ˜¯éœ€è¦å·²å¯åŠ¨å°±è·å– dom å…ƒç´ çš„è¯ï¼Œéœ€è¦æ”¾åœ¨ onMounted ç”Ÿå‘½å‘¨æœŸä¹‹ä¸­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// useUrlToBase64.js</span>
type Options <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">element</span><span class="token operator">:</span> string
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">options</span><span class="token operator">:</span> Options</span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token literal-property property">baseUrl</span><span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">const</span> <span class="token literal-property property">domData</span><span class="token operator">:</span> HTMLImageElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>element<span class="token punctuation">)</span>
    <span class="token comment">// åªä¼šè·å–åˆ°ç¬¬ä¸€ä¸ªç¬¦åˆçš„å…ƒç´ </span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">toBase64</span><span class="token punctuation">(</span>domData<span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    <span class="token keyword">const</span> <span class="token function-variable function">toBase64</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> HTMLImageElement</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token literal-property property">canvas</span><span class="token operator">:</span> HTMLCanvasElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> <span class="token literal-property property">context</span><span class="token operator">:</span> CanvasRenderingContext2D <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>
      canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> el<span class="token punctuation">.</span>width
      canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> el<span class="token punctuation">.</span>height
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
      context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
      <span class="token keyword">return</span> canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token string">'image/jpg'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> useUrlToBase64 <span class="token keyword">from</span> <span class="token string">&quot;@/hooks/useUrlToBase64&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token comment">// ä¸ºä»€ä¹ˆ hooks ä½¿ç”¨äº† promise ?</span>
<span class="token comment">// hooks åœ¨ setup ä¸‹æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œç”¨ Promise å¯ä»¥ç”¨å›è°ƒæ¥æ¥æ”¶ ä¸é˜»å¡ setup ä»£ç å—çš„æ‰§è¡Œ</span>
<span class="token keyword">const</span> base64 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">transformBase64</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  base64<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useUrlToBase64</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token string">'#hook-images'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hooks-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hook-images<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>src/assets/lazy-images/lazy4.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transformBase64<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>è½¬æ¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-textarea</span> <span class="token attr-name"><span class="token namespace">v-model:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>base64<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>18<span class="token punctuation">&quot;</span></span> <span class="token attr-name">showCount</span> <span class="token attr-name">allowClear</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_10-2-è‡ªå®šä¹‰npmåŒ…"><a href="#_10-2-è‡ªå®šä¹‰npmåŒ…" class="header-anchor">#</a> 10.2. è‡ªå®šä¹‰<code>npm</code>åŒ…</h3> <p>å‚è€ƒï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ResizeObserver" target="_blank" rel="noopener noreferrer"><code>ResizeObserver</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://cn.vitejs.dev/config/" target="_blank" rel="noopener noreferrer"><code>viteæ‰“åŒ…é…ç½®</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p><code>ResizeObserver</code>ï¼šç›‘è§† <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element" target="_blank" rel="noopener noreferrer"><code>Element</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å†…å®¹ç›’æˆ–è¾¹æ¡†ç›’æˆ–è€… <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/SVGElement" target="_blank" rel="noopener noreferrer"><code>SVGElement</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è¾¹ç•Œå°ºå¯¸çš„å˜åŒ–ã€‚</p> <ol><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ResizeObserver/disconnect" target="_blank" rel="noopener noreferrer"><code>ResizeObserver.disconnect()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ResizeObserver/observe" target="_blank" rel="noopener noreferrer"><code>ResizeObserver.observe()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ResizeObserver/unobserve" target="_blank" rel="noopener noreferrer"><code>ResizeObserver.unobserve()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ol></blockquote> <p>å®ç°åœ¨ <code>Vue3</code>ä¸­æ”¯æŒ <code>hook</code> å’Œ è‡ªå®šä¹‰æŒ‡ä»¤å»ç›‘å¬<code>dom</code>å®½é«˜çš„å˜åŒ–</p> <p><strong>æ¢—æ¦‚ï¼š</strong></p> <ol><li>ç›‘å¬ <code>dom</code> å®½é«˜å˜åŒ–ï¼š<strong><code>resizeObserver</code></strong></li> <li>ä½¿ç”¨æ„å»ºå·¥å…· <code>vite</code> è¿›è¡Œæ‰“åŒ…</li> <li>å‘å¸ƒåˆ° <code>npm</code></li></ol> <p><strong>æ­¥éª¤ï¼š</strong></p> <ol><li>æ–°å»ºå·¥ç¨‹</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token number">1</span>. <span class="token function">npm</span> init <span class="token comment"># ç”Ÿæˆpackage.json</span>
<span class="token number">2</span>. tsc <span class="token parameter variable">--init</span> <span class="token comment"># ç”Ÿæˆtsconfig.json</span>
<span class="token number">3</span>. create index.d.ts vite.config.ts <span class="token comment"># æ‰‹åŠ¨åˆ›å»º</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>ä¸‹è½½ä¾èµ–</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> vue <span class="token parameter variable">-D</span>
<span class="token function">npm</span> <span class="token function">install</span> vite <span class="token parameter variable">-D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>åœ¨ <code>src/index.ts</code> ä¸­ ç¼–å†™ä»£ç å¹¶å¯¼å‡º</li></ol> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span>App<span class="token punctuation">,</span> DirectiveBinding<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

<span class="token comment">/**
 * ResizeObserver ä¸»è¦ä¾¦å¬å…ƒç´ çš„å®½é«˜å˜åŒ–
 * @param el éœ€è¦ç›‘å¬çš„å…ƒç´ 
 * @param callback å¯¹ç›‘å¬å…ƒç´ çš„å›è°ƒæ“ä½œ
 */</span>
<span class="token keyword">function</span> <span class="token function">useResize</span><span class="token punctuation">(</span>el<span class="token operator">:</span> HTMLElement<span class="token punctuation">,</span> callback<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> resize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResizeObserver</span><span class="token punctuation">(</span>entries <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span>entries<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>contentRect<span class="token punctuation">)</span> <span class="token comment">// contentRect å…ƒç´ å˜åŒ–åçš„å®½é«˜</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  resize<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * è‡ªå®šä¹‰æ’ä»¶éœ€è¦å®ç°çš„installå‡½æ•°ç”¨äº Vue.use()
 * @param app Vueå®ä¾‹
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token punctuation">(</span>app<span class="token operator">:</span> App<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// å£°æ˜è‡ªå®šä¹‰æŒ‡ä»¤ å¯ä»¥é€šè¿‡ v-resize å»ç»‘å®šdomå…ƒç´ </span>
  app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span>el<span class="token operator">:</span> HTMLElement<span class="token punctuation">,</span> bindings<span class="token operator">:</span> DirectiveBinding<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">useResize</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> bindings<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

useResize<span class="token punctuation">.</span>install <span class="token operator">=</span> install
<span class="token keyword">export</span> <span class="token keyword">default</span> useResize

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><ol start="3"><li>é…ç½® <code>Vite</code>æ‰“åŒ…</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>build.lib <span class="token comment"># é…ç½®å…¥å£å’Œåå­—</span>
build.rollupOptions <span class="token comment"># é…ç½®é™¤å»ä¾èµ–å’Œå…¨å±€å˜é‡</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="5"><li><p>æ·»åŠ æ‰§è¡Œè„šæœ¬ <code>&quot;build&quot;: &quot;vite build&quot;</code> è¿›è¡Œ <code>npm run build</code>æ‰“åŒ…</p> <p>ç”Ÿæˆ  <code>dist/v-resize-zz.mjs</code> <code>dist/v-resize-zz.umd.js</code></p></li> <li><p>æ·»åŠ å£°æ˜æ–‡ä»¶ <code>index.d.ts</code></p></li> <li><p>åœ¨<code>package.json</code>æ–‡ä»¶ä¸­é…ç½®</p></li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  <span class="token string">&quot;main&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;dist/v-resize-zz.umd.js&quot;</span>,
  <span class="token string">&quot;module&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;dist/v-resize-zz.mjs&quot;</span>,
  <span class="token string">&quot;files&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;dist&quot;</span>,
    <span class="token string">&quot;index.d.ts&quot;</span>
  <span class="token punctuation">]</span>,
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="8"><li>æ³¨å†Œ npm è´¦å·; å½“å‰ npm çš„é•œåƒéœ€è¦å®˜æ–¹æº https://registry.npmjs.org/</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># æŸ¥çœ‹å½“å‰æº</span>
<span class="token function">npm</span> config get registry
<span class="token comment"># åˆ‡æ¢</span>
<span class="token function">npm</span> config <span class="token builtin class-name">set</span> <span class="token assign-left variable">registry</span><span class="token operator">=</span><span class="token string">&quot;https://registry.npmjs.org/&quot;</span>
<span class="token comment"># ç™»å½•</span>
<span class="token function">npm</span> login
<span class="token comment"># å‘å¸ƒå…¬æœ‰åŒ…</span>
<span class="token function">npm</span> publish <span class="token parameter variable">--access</span> public
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div> <img src="https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202401312234042.png" alt="image-20240131223430862" style="zoom:80%;"> <p>åœ¨é¡¹ç›®ä¸­ä¸‹è½½ <code>npm install v-resize-zz</code></p> <h2 id="_11-vue-router-ä½¿ç”¨"><a href="#_11-vue-router-ä½¿ç”¨" class="header-anchor">#</a> 11. <code>vue-router</code> ä½¿ç”¨</h2> <ol><li>ä¸‹è½½ä¾èµ–</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> vue-router@next <span class="token parameter variable">-S</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_12-è‡ªå®šä¹‰æ’ä»¶"><a href="#_12-è‡ªå®šä¹‰æ’ä»¶" class="header-anchor">#</a> 12. è‡ªå®šä¹‰æ’ä»¶</h2> <p>ç±»ä¼¼ Vue2 çš„ <code>this.$message.success('å‘é€æˆåŠŸ')</code> å¼¹å‡ºå…¨å±€å°å¼¹çª—</p> <p>æ’ä»¶åœ¨ <code>main.ts</code> ä¸­æ˜¯é€šè¿‡ <code>app.use()</code> æ¥ä½¿ç”¨çš„ã€‚å½’æ ¹ç»“åº•æ˜¯è°ƒç”¨äº†æ’ä»¶çš„``install`æ–¹æ³•ã€‚</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// æ’ä»¶çš„ç¼–å†™</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span>App<span class="token punctuation">,</span> VNode<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token keyword">import</span> Loading <span class="token keyword">from</span> <span class="token string">'./index.vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>createVNode<span class="token punctuation">,</span> render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">install</span><span class="token punctuation">(</span>app<span class="token operator">:</span> App<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Vue.use()æ—¶è°ƒç”¨</span>
    <span class="token keyword">const</span> vnode<span class="token operator">:</span> VNode <span class="token operator">=</span> <span class="token function">createVNode</span><span class="token punctuation">(</span>Loading<span class="token punctuation">)</span> <span class="token comment">// å°†å·²æœ‰çš„å…¨å±€loadingåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿdom</span>
    <span class="token function">render</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token comment">// æŒ‚è½½åˆ°bodyä¸Š</span>
    <span class="token comment">// console.log('install', vnode.component?.exposed) // æš´éœ²å‡ºç»„ä»¶exposeçš„å€¼</span>
    app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$loadings <span class="token operator">=</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> vnode<span class="token punctuation">.</span>component<span class="token operator">?.</span>exposed<span class="token punctuation">.</span>show<span class="token punctuation">,</span>
      hide<span class="token operator">:</span> vnode<span class="token punctuation">.</span>component<span class="token operator">?.</span>exposed<span class="token punctuation">.</span>hide
    <span class="token punctuation">}</span>
   <span class="token comment">// app.config.globalProperties.$loadings.show()</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>åœ¨ <code>main.ts</code> ä¸­å¯¹ <code>$loadings</code> è¿›è¡Œæ™ºèƒ½æç¤ºï¼š</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// å¯¹å…¨å±€å±æ€§ $loadings å£°æ˜æ–‡ä»¶å’Œæ™ºèƒ½æç¤º</span>
<span class="token keyword">type</span> <span class="token class-name">Lod</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">,</span>
  <span class="token function-variable function">hide</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'@vue/runtime-core'</span> <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ComponentCustomProperties</span> <span class="token punctuation">{</span>
    $loadings<span class="token operator">:</span> Lod
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ä½¿ç”¨ï¼šåœ¨ä»»æ„ä¸€ä¸ªVueæ–‡ä»¶ä¸­å»è°ƒç”¨<code>show</code>æ–¹æ³•</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
instance<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>$loadings<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_13-æ ·å¼"><a href="#_13-æ ·å¼" class="header-anchor">#</a> 13. æ ·å¼</h2> <p><strong>æ ·å¼ç©¿é€ï¼š</strong></p> <p>Vue2 ä½¿ç”¨ <code>/deep/</code></p> <p>Vue3 ä½¿ç”¨ <code>:deep()</code></p> <p><strong>æ’æ§½é€‰æ‹©å™¨</strong></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>A<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    Aç»„ä»¶ä¸­çš„å†…å®¹ï¼Œä»¥ä¸‹ä¸ºæ’æ§½ç”±çˆ¶ç»„ä»¶ç¼–å†™
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.A</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> lightpink<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* çˆ¶ç»„ä»¶ç¼–å†™çš„ç»“æ„ */</span>
<span class="token selector">:slotted(.parent)</span> <span class="token punctuation">{</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> bolder<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>å…¨å±€é€‰æ‹©å™¨</strong></p> <p>æ— è§†<code>scoped</code>åŠ å…¥å…¨å±€æ ·å¼</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">:global(div)</span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>åŠ¨æ€CSS <code>v-bind</code></strong></p> <p>å¯ä»¥åœ¨CSSä¸­ä½¿ç”¨JSä¸­çš„å˜é‡ï¼š</p> <p>å¦‚æœè¯¥å˜é‡æ˜¯å¯¹è±¡å½¢å¼çš„ï¼Œéœ€è¦ä½¿ç”¨å¼•å·ï¼š</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> width <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'200px'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> aboutColor <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  color<span class="token operator">:</span> <span class="token string">'#ffffff'</span><span class="token punctuation">,</span>
  backgroundColor<span class="token operator">:</span> <span class="token string">'lightgreen'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.box</span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid red<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">v-bind</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">v-bind</span><span class="token punctuation">(</span><span class="token string">'aboutColor.color'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">v-bind</span><span class="token punctuation">(</span><span class="token string">'aboutColor.backgroundColor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_14-electron"><a href="#_14-electron" class="header-anchor">#</a> 14. <code>electron</code></h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> i electron e
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_15-ç¼–è¯‘å®"><a href="#_15-ç¼–è¯‘å®" class="header-anchor">#</a> 15. ç¼–è¯‘å®</h2> <p>ç‰ˆæœ¬ï¼šVue3.3 +</p> <h3 id="_1-defineprops"><a href="#_1-defineprops" class="header-anchor">#</a> 1. <code>defineProps</code></h3> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token punctuation">,</span>
    required<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// é€šè¿‡ props å±æ€§æ¥è·å– name ç­‰å±æ€§å€¼</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>PropType</code>ï¼šæ˜¯ä¸€ä¸ª TypeScript çš„ç±»å‹ï¼Œç”¨äºæŒ‡å®šç»„ä»¶ props çš„ç±»å‹ã€‚</p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/toxicDocs/toxicBlogs/vue/ts4.html" class="prev">
          å‘å¸ƒè®¢é˜…è€…æ¨¡å¼
        </a></span> <span class="next"><a href="/toxicDocs/toxicBlogs/vue/vue1.html">
          01. vue2è„šæ‰‹æ¶
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-6986a797 data-v-6f8f7dda><li class="level-2" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_1-vue3åŸºæœ¬æ¦‚å¿µ" class="sidebar-link reco-side-_1-vue3åŸºæœ¬æ¦‚å¿µ" data-v-6986a797>1. vue3 åŸºæœ¬æ¦‚å¿µ</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_1-1-å®‰è£…é¡¹ç›®" class="sidebar-link reco-side-_1-1-å®‰è£…é¡¹ç›®" data-v-6986a797>1.1 å®‰è£…é¡¹ç›®</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_1-2-ä¼˜åŒ–" class="sidebar-link reco-side-_1-2-ä¼˜åŒ–" data-v-6986a797>1.2  ä¼˜åŒ–</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_1-3-æŒ‡ä»¤" class="sidebar-link reco-side-_1-3-æŒ‡ä»¤" data-v-6986a797>1.3 æŒ‡ä»¤</a></li><li class="level-2" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_2-è™šæ‹Ÿ-domå’Œ-diffç®—æ³•" class="sidebar-link reco-side-_2-è™šæ‹Ÿ-domå’Œ-diffç®—æ³•" data-v-6986a797>2. è™šæ‹Ÿ dom  å’Œ diff ç®—æ³•</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_2-1-æ¦‚å¿µ" class="sidebar-link reco-side-_2-1-æ¦‚å¿µ" data-v-6986a797>2.1 æ¦‚å¿µ</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_2-2-diffç®—æ³•" class="sidebar-link reco-side-_2-2-diffç®—æ³•" data-v-6986a797>2.2 diffç®—æ³•</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_2-3-æœ‰-key" class="sidebar-link reco-side-_2-3-æœ‰-key" data-v-6986a797>2.3 æœ‰ key</a></li><li class="level-2" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_3-bemæ¶æ„" class="sidebar-link reco-side-_3-bemæ¶æ„" data-v-6986a797>3. BEMæ¶æ„</a></li><li class="level-2" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_4-çˆ¶å­ç»„ä»¶ä¼ å€¼" class="sidebar-link reco-side-_4-çˆ¶å­ç»„ä»¶ä¼ å€¼" data-v-6986a797>4. çˆ¶å­ç»„ä»¶ä¼ å€¼</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_4-1-defineprops" class="sidebar-link reco-side-_4-1-defineprops" data-v-6986a797>4.1 defineProps</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_4-2-defineemit" class="sidebar-link reco-side-_4-2-defineemit" data-v-6986a797>4.2 defineEmit</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_4-3-defineexpose" class="sidebar-link reco-side-_4-3-defineexpose" data-v-6986a797>4.3 defineExpose</a></li><li class="level-2" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_5-ç€‘å¸ƒæµ" class="sidebar-link reco-side-_5-ç€‘å¸ƒæµ" data-v-6986a797>5. ç€‘å¸ƒæµ</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_5-1-ç­‰å®½æ‰‹åŠ¨è®¡ç®—" class="sidebar-link reco-side-_5-1-ç­‰å®½æ‰‹åŠ¨è®¡ç®—" data-v-6986a797>5.1 ç­‰å®½æ‰‹åŠ¨è®¡ç®—</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_5-2" class="sidebar-link reco-side-_5-2" data-v-6986a797>5.2</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_5-3" class="sidebar-link reco-side-_5-3" data-v-6986a797>5.3</a></li><li class="level-2" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_6-ç»„ä»¶" class="sidebar-link reco-side-_6-ç»„ä»¶" data-v-6986a797>6. ç»„ä»¶</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_6-1-å±€éƒ¨ç»„ä»¶" class="sidebar-link reco-side-_6-1-å±€éƒ¨ç»„ä»¶" data-v-6986a797>6.1 å±€éƒ¨ç»„ä»¶</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_6-2-é€’å½’ç»„ä»¶" class="sidebar-link reco-side-_6-2-é€’å½’ç»„ä»¶" data-v-6986a797>6.2 é€’å½’ç»„ä»¶</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_6-3-æ’æ§½" class="sidebar-link reco-side-_6-3-æ’æ§½" data-v-6986a797>6.3 æ’æ§½</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_6-4-å¼‚æ­¥ç»„ä»¶" class="sidebar-link reco-side-_6-4-å¼‚æ­¥ç»„ä»¶" data-v-6986a797>6.4 å¼‚æ­¥ç»„ä»¶</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_6-5-teleport" class="sidebar-link reco-side-_6-5-teleport" data-v-6986a797>6.5 Teleport</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_6-6-keepalive" class="sidebar-link reco-side-_6-6-keepalive" data-v-6986a797>6.6 KeepAlive</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_6-7-antd" class="sidebar-link reco-side-_6-7-antd" data-v-6986a797>6.7 AntD</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_6-8-provide-inject" class="sidebar-link reco-side-_6-8-provide-inject" data-v-6986a797>6.8 provide / inject</a></li><li class="level-2" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_7-ä½¿ç”¨-v-md-editor" class="sidebar-link reco-side-_7-ä½¿ç”¨-v-md-editor" data-v-6986a797>7. ä½¿ç”¨ v-md-editor</a></li><li class="level-2" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_8-æ·±å…¥-v-model" class="sidebar-link reco-side-_8-æ·±å…¥-v-model" data-v-6986a797>8. æ·±å…¥ v-model</a></li><li class="level-2" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_9-è‡ªå®šä¹‰æŒ‡ä»¤" class="sidebar-link reco-side-_9-è‡ªå®šä¹‰æŒ‡ä»¤" data-v-6986a797>9. è‡ªå®šä¹‰æŒ‡ä»¤</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_9-1-æƒé™æŒ‰é’®æ§åˆ¶" class="sidebar-link reco-side-_9-1-æƒé™æŒ‰é’®æ§åˆ¶" data-v-6986a797>9.1. æƒé™æŒ‰é’®æ§åˆ¶</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_9-2-åˆ—è¡¨æ‹–æ‹½æŒ‡ä»¤" class="sidebar-link reco-side-_9-2-åˆ—è¡¨æ‹–æ‹½æŒ‡ä»¤" data-v-6986a797>9.2. åˆ—è¡¨æ‹–æ‹½æŒ‡ä»¤</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_9-3-æ‡’åŠ è½½æŒ‡ä»¤" class="sidebar-link reco-side-_9-3-æ‡’åŠ è½½æŒ‡ä»¤" data-v-6986a797>9.3. æ‡’åŠ è½½æŒ‡ä»¤</a></li><li class="level-2" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_10-hook" class="sidebar-link reco-side-_10-hook" data-v-6986a797>10. Hook</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_10-1-url-è½¬-base64" class="sidebar-link reco-side-_10-1-url-è½¬-base64" data-v-6986a797>10.1. URL è½¬ Base64</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_10-2-è‡ªå®šä¹‰npmåŒ…" class="sidebar-link reco-side-_10-2-è‡ªå®šä¹‰npmåŒ…" data-v-6986a797>10.2. è‡ªå®šä¹‰npmåŒ…</a></li><li class="level-2" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_11-vue-router-ä½¿ç”¨" class="sidebar-link reco-side-_11-vue-router-ä½¿ç”¨" data-v-6986a797>11. vue-router ä½¿ç”¨</a></li><li class="level-2" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_12-è‡ªå®šä¹‰æ’ä»¶" class="sidebar-link reco-side-_12-è‡ªå®šä¹‰æ’ä»¶" data-v-6986a797>12. è‡ªå®šä¹‰æ’ä»¶</a></li><li class="level-2" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_13-æ ·å¼" class="sidebar-link reco-side-_13-æ ·å¼" data-v-6986a797>13. æ ·å¼</a></li><li class="level-2" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_14-electron" class="sidebar-link reco-side-_14-electron" data-v-6986a797>14. electron</a></li><li class="level-2" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_15-ç¼–è¯‘å®" class="sidebar-link reco-side-_15-ç¼–è¯‘å®" data-v-6986a797>15. ç¼–è¯‘å®</a></li><li class="level-3" data-v-6986a797><a href="/toxicDocs/toxicBlogs/vue/vite.html#_1-defineprops" class="sidebar-link reco-side-_1-defineprops" data-v-6986a797>1. defineProps</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/toxicDocs/assets/js/app.57a67b61.js" defer></script><script src="/toxicDocs/assets/js/3.38eb45c0.js" defer></script><script src="/toxicDocs/assets/js/1.eb5625cb.js" defer></script><script src="/toxicDocs/assets/js/80.3e28bff5.js" defer></script>
  </body>
</html>
