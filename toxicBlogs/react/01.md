---
title: 01. ReactåŸºç¡€çŸ¥è¯†
date: 2024-05-24
categories:
 - react
sidebar: 'auto'
---

æ³¨æ„ï¼šæœ¬æ–‡ä¸æ˜¯åœ¨è„šæ‰‹æ¶ä¸­å­¦ä¹ çš„ã€‚

## 1. ç®€ä»‹

å‚è€ƒå­¦ä¹ é“¾æ¥ï¼š

1. [linjunc/react-study: ğŸ‰ Here are all the high-quality React articles, a React repository worth learning (github.com)](https://github.com/linjunc/react-study)
2. [å°šç¡…è°·Reactæ•™ç¨‹ï¼ˆå·²åŠ æ›´æ–°ç‰ˆå†…å®¹ï¼ŒBç«™æœ€ç«ï¼‰_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1wy4y1D7JT/?spm_id_from=333.337.search-card.all.click&vd_source=fd483034c51a8aa4f43cf44d83bc54a0)
3. [React å®˜æ–¹ä¸­æ–‡æ–‡æ¡£](https://zh-hans.react.dev/)



### æ¦‚å¿µï¼š

> Reactæ˜¯ä¸€ä¸ªå°†æ•°æ®æ¸²æŸ“ä¸ºHTMLè§†å›¾çš„å¼€æºJavaScriptåº“ã€‚
>
> 2013å¹´å¼€æºã€‚



### åŸç”Ÿ JS çš„ç—›ç‚¹ï¼š

åŸç”Ÿ JavaScript æ“ä½œ DOM æ•ˆç‡ä½ â€”â€” å¯¼è‡´æµè§ˆå™¨ä¸æ–­çš„é‡ç»˜é‡æ’ï¼Œæ€§èƒ½ä¸å¥½

åŸç”Ÿ JavaScript æ²¡æœ‰ç»„ä»¶åŒ–ï¼ˆæ¨¡å—åŒ–ï¼‰ç¼–ç æ–¹æ¡ˆ â€”â€” ä»£ç å¤ç”¨ç‡ä½ã€‚

JS çš„æ¨¡å—åŒ– â€”â€” å³å°†ä¸€ä¸ªå¾ˆå¤§çš„JSæ–‡ä»¶æŒ‰ç…§ä¸åŒçš„åŠŸèƒ½ç‚¹æ‹†åˆ†ä¸ºä¸åŒçš„JSæ¨¡å—ã€‚



### Reactç‰¹ç‚¹ï¼š

1. ç»„ä»¶åŒ–æ¨¡å¼ã€å£°æ˜å¼ç¼–ç¨‹
2. React Native å¯ä»¥ä½¿ç”¨ React è¯­æ³•è¿›è¡Œç§»åŠ¨ç«¯å¼€å‘
3. ä½¿ç”¨è™šæ‹Ÿ DOM å’Œ diff ç®—æ³•ï¼Œå‡å°‘å’ŒçœŸå® DOM ä¹‹é—´çš„äº¤äº’
   1. ä½¿ç”¨è™šæ‹Ÿ DOMï¼Œä¸æ€»ç›´æ¥æ“ä½œé¡µé¢çš„çœŸå® DOM
   2. DOM Diff ç®—æ³•ï¼Œæœ€å°åŒ–é¡µé¢é‡ç»˜

![image-20240524132854326](https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202405241328580.png)



### ç®€å•ä¸Šæ‰‹ï¼š

ä¾èµ–ï¼šreact.js éœ€åœ¨ react-dom.js ä¹‹å‰å¼•å…¥

 ![image-20240524193141366](https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202405241931430.png)

+ react.js: React çš„æ ¸å¿ƒåº“  æä¾›å¯¹è±¡ `React`
+ react-dom.js: æä¾›æ“ä½œ DOM çš„ react æ‰©å±•åº“ æä¾›å¯¹è±¡ `ReactDOM`
+ babel.min.js: è§£æ JSX è¯­æ³•ä»£ç è½¬ä¸ºçº¯ JS è¯­æ³•ä»£ç çš„åº“
+ prop-type.jsï¼šæä¾› `PropTypes` ä¸º props æ·»åŠ é™åˆ¶æ¡ä»¶

â€‹    ![image-20240601000714246](https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202406010007319.png)

```html
  <body>
    <div class="test"></div>
    <script src="./react.development.js"></script>
    <script src="./react-dom.development.js"></script>
    <script src="./babel.min.js"></script>
    <!-- <script type="text/javascript"></script> é»˜è®¤æ ‡ç­¾å†…å†™çš„æ˜¯javascriptè¯­æ³• -->
    <!-- åŒ…å«éœ€è¦babelç†è§£çš„jsxè¯­æ³• -->
    <script type="text/babel">
      // 1. åˆ›å»ºè™šæ‹Ÿdom åµŒå¥—æ ‡ç­¾
      const vDOM = (
        <h1 id="title">
          <span className="name">Hello, React</span> // éœ€è¦classå±æ€§çš„æ—¶å€™ä½¿ç”¨className
        </h1>
      ) // æ ‡ç­¾å¿…é¡»é—­åˆ
      // 2. æ¸²æŸ“è™šæ‹Ÿdomåˆ°é¡µé¢ä¸Š
      ReactDOM.render(vDOM, document.querySelector(".test"))
    </script>
  </body>
```



### DOM

**è™šæ‹Ÿ DOM**

1. æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Object ç±»å‹çš„å¯¹è±¡
2. æ‹¥æœ‰çš„å±æ€§è¿œè¿œå°äºçœŸå®DOMä¸Šå¸¦æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œæ›´åŠ è½»ä¾¿ã€‚
3. è™šæ‹Ÿ DOM æœ€ç»ˆä¼šè¢« React è½¬å˜ä¸ºçœŸå® DOMï¼Œå‘ˆç°åœ¨é¡µé¢ä¸Šã€‚

 ![image-20240524221644317](https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202405242220832.png)



**çœŸå® DOM**

> ä½¿ç”¨ `console.dir` å¯ä»¥æ‰“å°å‡ºçœŸå®DOMå…ƒç´ çš„å±æ€§å’Œæ–¹æ³•



## 2. JSX

åœ¨çº¿è½¬æ¢å™¨ï¼š[HTML to JSX (transform.tools)](https://transform.tools/html-to-jsx)

> æ ‡ç­¾è¯­æ³•ï¼›XML æ—©æœŸç”¨äºå­˜å‚¨å’Œä¼ è¾“æ•°æ®
>
> å…¨ç§°ï¼šJavaScript XML â€”â€” React å®šä¹‰çš„ä¸€ç§ç±»ä¼¼äº XML çš„ JS æ‰©å±•è¯­æ³•ï¼šJS + XML
>
> æœ¬è´¨ï¼šReact.createElement(component, props, ...children) çš„è¯­æ³•ç³–
>
> ä½œç”¨ï¼šç”¨æ¥ç®€åŒ–åˆ›å»ºè™šæ‹Ÿ DOM

```js
// JS å†™æ³•
const element = React.createElement('h1', { id: 'title' }, 'hello')
// å¦‚æœè¦åµŒå¥—çš„è¯éœ€è¦é‡æ–°è°ƒç”¨React.createElement
// ä¸Šé¢åˆ›å»ºçš„å°±æ˜¯ç®€å•çš„è™šæ‹Ÿ DOM å¯¹è±¡
```

```jsx
const element = <h1>Hello, React</h1> 
// ä¸æ˜¯å­—ç¬¦ä¸²
// element å°±æ˜¯ä¸€ä¸ªè™šæ‹Ÿå¯¹è±¡ å³Objectç±»å‹çš„å¯¹è±¡
```

### 2.1 æ³¨æ„ï¼š

1. æ ‡ç­¾å³ä¸º HTML æ ‡ç­¾ï¼Œæ‰€æœ‰æ ‡ç­¾éƒ½å¿…é¡»é—­åˆ `<input />` `<br />`

2. å±æ€§å³ä¸º HTML å±æ€§

3. é‡åˆ° `<` å¼€å¤´ ä»¥æ ‡ç­¾çš„è¯­æ³•è§£æ

4. é‡åˆ° `{` å¼€å¤´ ä»¥ JS çš„è¯­æ³•è§£æï¼šæ ‡ç­¾ä¸­çš„ JS è¡¨è¾¾å¼ä»£ç å¿…é¡»ä½¿ç”¨ `{ }` åŒ…å«

5. æ ·å¼çš„ç±»åæŒ‡å®šè¦ç”¨classNameï¼Œä¸èƒ½ç”¨class

6. å†…è”æ ·å¼ï¼Œè¦ç”¨ style = {{ key: value }}  ä¸¤ä¸ªå¤§æ‹¬å·ã€‚åŸå› æ˜¯ `style={ }` JSX å¤§æ‹¬å·å†…çš„ä¸€ä¸ªæ™®é€š `{}` å¯¹è±¡ã€‚

7. è‡ªå®šä¹‰æ ‡ç­¾ï¼š

   ï¼ˆ1ï¼‰è‹¥å°å†™å­—æ¯å¼€å¤´ï¼Œåˆ™è½¬ä¸ºhtmlä¸­çš„åŒåå…ƒç´ ï¼›è‹¥htmlä¸­æ— å¯¹åº”çš„åŒåå…ƒç´ åˆ™æŠ¥é”™ã€‚

   ï¼ˆ2ï¼‰è‹¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œreact å°±å»æ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ï¼Œè‹¥ç»„ä»¶æ²¡æœ‰å®šä¹‰ï¼Œåˆ™æŠ¥é”™ã€‚

   **React ç»„ä»¶å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œè€Œ HTML æ ‡ç­¾åˆ™å¿…é¡»æ˜¯å°å†™å­—æ¯ã€‚**

8. JSX æ¯” HTML æ›´åŠ ä¸¥æ ¼
9. ç»„ä»¶ä¹Ÿä¸èƒ½è¿”å›å¤šä¸ª JSX æ ‡ç­¾ï¼Œå¿…é¡»å°†å®ƒä»¬åŒ…è£¹åˆ°ä¸€ä¸ªå…±äº«çš„çˆ¶çº§ä¸­ã€‚æ¯”å¦‚ `<div>...</div>` æˆ–ä½¿ç”¨ç©ºçš„ `<>...</>` åŒ…è£¹

 ![image-20240524224914710](https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202405242249752.png)

```jsx
const name = "Hello, React - jsx"
const claasname = "name-js"
// 1. åˆ›å»ºè™šæ‹Ÿdom åªå…è®¸æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾ï¼Œè¦ä¸åµŒå¥— <div></div> è¦ä¸å°± <></>
const vDOM = (
  <h1 id="title">
    <span className={claasname}>{name}</span>
  </h1>
) // æ ‡ç­¾å¿…é¡»é—­åˆ
// 2. æ¸²æŸ“è™šæ‹Ÿdomåˆ°é¡µé¢ä¸Š
ReactDOM.render(vDOM, document.querySelector(".test"))
```



### 2.2 éå†

> 1. ä½¿ç”¨å¤§æ‹¬å· `{}` åŒ…è£¹ä½ JS è¡¨è¾¾å¼ã€‚ä¸èƒ½å†™ JS ä»£ç å’Œ JS è¯­å¥å“¦ï¼å¦‚ for å¾ªç¯æˆ– if åˆ¤æ–­ç­‰ç­‰
> 2. éå†éœ€è¦ key å€¼
> 3. ä½¿ç”¨é«˜çº§å‡½æ•°ç¼–ç¨‹ å¦‚ map filter ç­‰

```jsx
const array = ["Angular", "Vue", "React"] // æ•°ç»„ä¼šè‡ªåŠ¨éå†
const VDOM = (
  <div>
    <h1>å‰ç«¯JSæ¡†æ¶åˆ—è¡¨</h1>
    <ul>
      {
        array.map((item, index) => (
          <li key={index}>{item}</li>
        ))
      }
    </ul>
  </div>
)      
ReactDOM.render(VDOM, document.querySelector(".test"))
```

 ![image-20240524233709350](https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202405242337441.png)



### 2.2 æ¡ä»¶æ¸²æŸ“

1. åœ¨ JSX è¯­æ³•å¤–éƒ¨å†™ JS è¯­å¥ï¼Œå†åœ¨ JSX å†…éƒ¨ä½¿ç”¨ã€‚
2. ä½¿ç”¨ä¸‰ç›®è¿ç®— `condition ? res1 : res2`
3. ä½¿ç”¨é€»è¾‘ä¸ `&&` è¿ç®— `condition && res` 



### 2.3 äº‹ä»¶å¤„ç†

1. ç»‘å®šäº‹ä»¶çš„æ—¶å€™**ä¸è¦è°ƒç”¨ï¼Œå³åŠ ä¸Šå°æ‹¬å·**ã€‚åªéœ€è¦å°†å‡½æ•°ä¼ é€’ç»™äº‹ä»¶å³å¯ã€‚

```html
<script type="text/babel">
  // å£°æ˜å“åº”äº‹ä»¶
  function handleClick() {
  	alert("You clicked me!")
  }
  const VDOM = <h1 onClick={handleClick}>å‰ç«¯JSæ¡†æ¶åˆ—è¡¨</h1>
  ReactDOM.render(VDOM, document.querySelector(".test"))
</script>
```



### 2.4 ç»„ä»¶å®šä¹‰

1. ä½¿ç”¨å¤§å†™å­—æ¯å®šä¹‰**å·¥å‚å‡½æ•°ç»„ä»¶**ï¼ˆå±äºç®€å•ç»„ä»¶ï¼‰

```jsx
const array = ["Angular", "Vue", "React"] // æ•°ç»„ä¼šè‡ªåŠ¨éå†
function Demo() {
  // babel ç¼–è¯‘ä¸º JS çš„æ—¶å€™å¼€å¯äº†ä¸¥æ ¼æ¨¡å¼ã€‚ä¸¥æ ¼æ¨¡å¼ä¸‹thisæŒ‡å‘undefined
  return (
    <ul>
      {array.map((item, index) => (
        <li key={index}>{item}</li>
      ))}
    </ul>
  )
}
ReactDOM.render(<Demo />, document.querySelector(".test")) // <Demo /> å¿…é¡»å¤§å†™ä¸”é—­åˆ
// å¦åˆ™ä¼šè¢«å½“åšæ™®é€šhtmlæ ‡ç­¾æ¸²æŸ“
// renderæ‰€åšçš„æµç¨‹ï¼š
// 1. reactè§£æç»„ä»¶æ ‡ç­¾ï¼Œæ‰¾åˆ°äº†Demoç»„ä»¶ã€‚
// 2. å‘ç°ç»„ä»¶æ˜¯ä½¿ç”¨å‡½æ•°å®šä¹‰çš„ï¼Œéšåè°ƒç”¨è¯¥å‡½æ•°ã€‚å°†è¿”å›çš„è™šæ‹ŸDOMè½¬ä¸ºçœŸå®DOMï¼Œéšåå‘ˆç°åœ¨é¡µé¢ä¸Šã€‚
```

 ![image-20240525135627782](https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202405251356860.png)

2. **ES6 ç±»ç»„ä»¶**ï¼ˆå¤æ‚ç»„ä»¶ï¼‰

```jsx
const array = ["Angular", "Vue", "React"] // æ•°ç»„ä¼šè‡ªåŠ¨éå†
class ArrayList extends React.Component {
  render() {
    console.log(this) // ArrayList çš„å®ä¾‹å¯¹è±¡
    return (
      <ul>
        {array.map((item, index) => {
          return <li key={index}>{item}</li>
        })}
      </ul>
    )
  }
}
ReactDOM.render(<ArrayList />, document.querySelector(".test"))
// renderæ‰€åšçš„æµç¨‹ï¼š
// 1. reactè§£æç»„ä»¶æ ‡ç­¾ï¼Œæ‰¾åˆ°äº† ArrayList ç»„ä»¶ã€‚
// 2. å‘ç°ç»„ä»¶æ˜¯ä½¿ç”¨ç±»å®šä¹‰çš„ï¼Œéšåå®ä¾‹åŒ–è¯¥ç±»è·å¾—ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚å¹¶é€šè¿‡è¯¥å®ä¾‹è°ƒç”¨åŸå‹ä¸Šçš„renderæ–¹æ³•ã€‚
// 3. å°†renderè¿”å›çš„è™šæ‹ŸDOMè½¬ä¸ºçœŸå®DOMï¼Œéšåå‘ˆç°åœ¨é¡µé¢ä¸Šã€‚
```



:question:**æ€ä¹ˆåŒºåˆ«ç®€å•ç»„ä»¶å’Œå¤æ‚ç»„ä»¶å‘¢ï¼Ÿ**

å¤æ‚ç»„ä»¶æ˜¯æ‹¥æœ‰çŠ¶æ€çš„ã€‚

## 3. ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§å±æ€§

> åªé’ˆå¯¹ ç»„ä»¶æ˜¯ç”±ç±»å®šä¹‰çš„æƒ…å†µã€‚æ¯•ç«Ÿå‡½æ•°å®šä¹‰çš„ç»„ä»¶è¿ this éƒ½æ²¡æœ‰ï¼Œæ€ä¹ˆä¼šæœ‰å®ä¾‹å‘¢ï¼Ÿ

### 3.1 State

```jsx
class Weather extends React.Component {
  constructor(props) {
    super(props) // ç»§æ‰¿ç»„ä»¶ä¸ºäº†è·å–state
    // åˆå§‹åŒ–çŠ¶æ€ stateæ˜¯ç»„ä»¶å¯¹è±¡ä¸­æœ€é‡è¦çš„å±æ€§ã€‚å¯¹è±¡å½¢å¼ï¼ˆåŒ…å«å¤šä¸ªæ•°æ®ï¼‰
    this.state = {
      isHot: true
    }
  }
  render() {
    return <h1>ä»Šå¤©å¤©æ°”å¾ˆ{this.state.isHot ? "ç‚çƒ­" : "å‡‰çˆ½"}</h1>
  }
}
```

**ç»„ä»¶è¢«ç§°ä¸º"çŠ¶æ€æœº"ï¼Œé€šè¿‡æ›´æ–°ç»„ä»¶çš„ `state `æ¥æ›´æ–°å¯¹åº”çš„é¡µé¢æ˜¾ç¤ºï¼ˆé‡æ–°æ¸²æŸ“ç»„ä»¶ï¼‰**

è¯»å–çŠ¶æ€ï¼š`this.state.property`

æ›´æ”¹çŠ¶æ€ï¼š`this.setState({ key: value })`

```jsx
class Weather extends React.Component {
  // åªåœ¨åˆå§‹åŒ–çš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡
  constructor(props) {
    super(props)
    this.state = {
      isHot: true,
      wind: "big"
    }
  }
  // åˆå§‹åŒ–è°ƒç”¨ä¸€æ¬¡åï¼Œæ¯æ¬¡ä¿®æ”¹çŠ¶æ€å°±è°ƒç”¨ä¸€æ¬¡ å…±1 + næ¬¡
  render() {
    return (
      <h1 onClick={this.changeWeather}>
        ä»Šå¤©å¤©æ°”å¾ˆ{this.state.isHot ? "ç‚çƒ­" : "å‡‰çˆ½"}
      </h1>
    )
  }
  // changeWeather â€”â€”â€”â€” æ”¾åœ¨Weatherçš„åŸå‹å¯¹è±¡ä¸Šï¼Œä¾›å®ä¾‹ä½¿ç”¨
  // é€šè¿‡ Weather å®ä¾‹è°ƒç”¨æ—¶ï¼Œè¯¥å‡½æ•°ä¸­çš„thiså°±æ˜¯Weatherå®ä¾‹
  // ä½†æ˜¯ä¸€èˆ¬è‡ªå®šä¹‰æ–¹æ³•æ˜¯ä¸ºäº†ä½œä¸ºonClickçš„å›è°ƒï¼Œå¹¶ä¸æ˜¯é€šè¿‡å®ä¾‹è¿›è¡Œè°ƒç”¨
  // ç›´æ¥å†™ function changeWeather() {} æ˜¯æ— æ³•æ‹¿åˆ°Weatherå®ä¾‹çš„ã€‚thisæŒ‡å‘undefined
  // è‡ªå®šä¹‰å‡½æ•°è¦ä½¿ç”¨èµ‹å€¼è¯­å¥+ç®­å¤´å‡½æ•°çš„æ–¹å¼
  changeWeather = () => {
    const isHot = this.state.isHot
    this.setState({ isHot: !isHot }) // æ­¤æ—¶æ•°æ®æ›´æ”¹ï¼Œè§†å›¾é‡æ–°æ¸²æŸ“ï¼Œåªæ›´æ”¹ä½ ä¿®æ”¹çš„éƒ¨åˆ†ï¼Œå…¶ä»–å±æ€§å€¼ä¸å˜
    console.log(this.state)
  }
}
ReactDOM.render(<Weather />, document.querySelector(".test"))
```

**æ³¨æ„ï¼š**

1. render æ–¹æ³•ä¸­ this ä¸ºç»„ä»¶å®ä¾‹å¯¹è±¡
2. ç»„ä»¶ä¸­è‡ªå®šä¹‰çš„æ–¹æ³• this æŒ‡å‘ undefined
   1. å¼ºåˆ¶ç»‘å®š thisï¼Œåœ¨constructorä¸­é€šè¿‡ bind æ¥ç»‘å®š this
   2. ç®­å¤´å‡½æ•°
3. çŠ¶æ€æ•°æ®ï¼Œä¸èƒ½ç›´æ¥æ›´æ”¹ å¦‚`this.state.wind = 'xxxx'`

### 3.2 Props

åœ¨ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œä¼ é€’ç±»ä¼¼ `key - value` çš„å½¢å¼ã€‚

åœ¨ render å‡½æ•°ä¸­å»è·å–ç»„ä»¶çš„ props

```jsx
render() {
  const { date } = this.props
  return (
    <h1 onClick={this.changeWeather}>
      ä»Šå¤©{date}å¤©æ°”å¾ˆ{this.state.isHot ? "ç‚çƒ­" : "å‡‰çˆ½"}
    </h1>
  )
}

ReactDOM.render(
  <Weather date="æ˜ŸæœŸä¸€" />, // ä»è¿™é‡Œä¼ é€’props
  document.querySelector(".test")
)
```



**æ‰¹é‡ä¼ é€’props**

å‰ç«¯ï¼šåœ¨åˆé€‚çš„æ—¶å€™å‘å‡ºåˆé€‚çš„è¯·æ±‚ å°†åˆé€‚çš„æ•°æ®å±•ç¤ºåˆ°åˆé€‚çš„ä½ç½®ã€‚

```jsx
ReactDOM.render(
  <Weather date="æ˜ŸæœŸä¸€" xxx="jjj" />, // ä¸€ä¸ªä¸€ä¸ªå†™
  document.querySelector(".test")
)
```

```jsx
const props = { name: 'jack', age: 18 }
ReactDOM.render(
  <Person {...props} />, // å°†è¦ä¼ é€’çš„å±æ€§å€¼æ”¾åœ¨å¯¹è±¡ä¸­è¿›è¡Œæ‰¹é‡ä¼ é€’
  document.querySelector(".test")
)
```



**å¯¹ props è¿›è¡Œé™åˆ¶**

```jsx
Weather.propTypes = {
  date: PropTypes.string.isRequired
}
ReactDOM.render(
  <Weather date="æ˜ŸæœŸä¸€" />, // å¦‚æœæƒ³ä¼ é€’numberç±»å‹ ä½†æ˜¯å¦‚ä»Šçš„ä¼ é€’æ˜¯é»˜è®¤å­—ç¬¦ä¸²çš„
  // num = {1} å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼ä¼ é€’numberç±»å‹
  document.querySelector(".test")
)
```



**æ·»åŠ  props é»˜è®¤å€¼**

```jsx
Weather.defaultProps = {
  date: "ä¸–ç•Œæœ«æ—¥"
}
```

æ³¨æ„ï¼šå¯ä»¥å°† `propTypes `å’Œ `defaultProps `å±æ€§åŠ åˆ° ç±»æœ¬èº«ä¸Šã€‚æ•ˆæœåŒ `Weather.propTypes` ä½†æ›´åŠ æ•´æ´ã€‚

```jsx
class Weather extends React.Component {
  static propTypes = {}
  static defaultProps = {}
  constructor(props) {}
  render() {}
}
```



ä½¿ç”¨å‡½æ•°çš„å½¢å¼å®šä¹‰ç»„ä»¶çš„æ—¶å€™ï¼Œç›´æ¥åœ¨ function åä¼ é€’ props å³å¯ã€‚

å¦‚æœéœ€è¦å¯¹ props è¿›è¡Œé™åˆ¶çš„è¯ï¼Œå¯èƒ½éœ€è¦ç›´æ¥åœ¨ å‡½æ•°å¼ç»„ä»¶ çš„å¤–ä¾§ã€‚



### 3.3 Refs ä¸ äº‹ä»¶å¤„ç†

ç»„ä»¶å†…çš„æ ‡ç­¾éƒ½å¯ä»¥ä½¿ç”¨ `ref` æ¥æ ‡è¯†è‡ªå·±ã€‚

å­—ç¬¦ä¸²å½¢å¼çš„æ ‡è¯†ï¼š`ref='input1'` è¯¥æ ‡è¯†ä¼šè¢« React ç»„ä»¶å®ä¾‹ä¸­çš„ `refs` æ”¶é›†èµ·æ¥ã€‚**å·²è¿‡æ—¶ï¼å°½é‡é¿å…è¿™ç§å†™æ³•ï¼**

å›è°ƒå‡½æ•°å½¢å¼çš„æ ‡è¯†ï¼š`ref={(input) => (this.msgInput = input)}` 

â€‹									 æ­¤æ—¶çš„ `msgInput`æ˜¯ç›´æ¥æŒ‚åœ¨å®ä¾‹ä¸Šï¼Œä¸éœ€è¦é¢å¤–å£°æ˜ã€‚

`createRef API`ï¼š`this.msgRef = createRef()`



**å›è°ƒå‡½æ•°å½¢å¼ï¼š**

1. å¦‚æœæ˜¯ä½¿ç”¨å†…è”å‡½æ•°å®šä¹‰çš„ï¼Œåœ¨æ›´æ–°è¿‡ç¨‹ä¸­ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡ã€‚è¯¥domä¼šå˜æˆnull ä¹‹åæ‰æ˜¯inputæ ‡ç­¾ã€‚

```jsx
render() {
  return (
    <div>
      <input type="text" ref={(input) => (this.msgInput = input)} />
      // è¿™ç§å½¢å¼å°±å«åšå†…è”å½¢å¼
      <button onClick={this.alertData}>ç‚¹å‡»å¼¹å‡ºå·¦ä¾§æç¤º</button>
    </div>
  )
}
```

 ![image-20240601173027785](https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202406011730883.png)

ä½¿ç”¨ ç±»å‡½æ•° è¿›è¡Œå®šä¹‰å¯ä»¥é¿å…æ›´æ–°è¿‡ç¨‹ä¸­çš„é‡æ–°æ¸²æŸ“

```jsx
<input type="text" ref={this.setRef} />  // ç±»å‡½æ•°ç»‘å®šå½¢å¼

setRef = (currentNode) => {
  this.msgInput = currentNode
  console.log("@", currentNode)
}
```



**API å½¢å¼**

åœ¨ç»„ä»¶ä¸­ç›´æ¥å£°æ˜å˜é‡ï¼Œèµ‹å€¼ä¸º`createRef()`

ä½¿ç”¨æ—¶ï¼š

```jsx
<input type="text" ref={this.setRef} />  // setRefæ˜¯åˆ›å»ºå‡ºæ¥çš„å˜é‡ã€‚ç›´æ¥æ”¾åœ¨å®ä¾‹èº«ä¸Š
```



## 4. ç”Ÿå‘½å‘¨æœŸ

### 4.1 æ—§ç”Ÿå‘½å‘¨æœŸ

 ![image-20240627142623592](https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202406271426669.png)

![img](https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202406262335040.webp)

1. `shouldComponentUpdate` åœ¨ å¼€å‘è€… `setState` ä¹‹åï¼Œè¯¢é—®æ˜¯å¦è¦è¿›è¡Œæ›´æ–°ï¼Œè¿”å› `boolean` ç±»å‹ã€‚

   åœ¨ç»„ä»¶æ›´æ–°ä¹‹å‰è°ƒç”¨ï¼Œå¯ä»¥æ§åˆ¶ç»„ä»¶æ˜¯å¦è¿›è¡Œæ›´æ–°ã€‚

   æ³¨æ„ï¼šä¸èƒ½åœ¨è¯¥é’©å­ä¸­è°ƒç”¨ `setState()` å¦åˆ™ä¼šå¯¼è‡´æ— é™å¾ªç¯è°ƒç”¨æ›´æ–°ã€‚

   é»˜è®¤è¿”å›`true`

2. `React` ä» v16.3 å¼€å§‹åºŸå¼ƒ

    `componentWillMount` --- 

    `componentWillReceiveProps`  --- 

    `componentWillUpdate` --- 

   

### 4.2 New LifeCycle

![img](https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202406270005875.webp)

#### `constructor(props?)`

1. åœ¨ä¸º `React.Component` å­ç±»å®ç°æ„é€ å‡½æ•°æ—¶ï¼Œåº”åœ¨å…¶ä»–è¯­å¥ä¹‹å‰è°ƒç”¨ `super()`
2. ä»…ç”¨äº åˆå§‹åŒ– `state `ï¼Œä»¥åŠä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ç»‘å®šå®ä¾‹ã€‚
3. å¦‚æœä¸åˆå§‹åŒ– `state`ï¼Œå°±ä¸éœ€è¦å†™ `constructor`ï¼Œåªéœ€è¦è®¾ç½® `this.state` å³å¯ã€‚
4. ä¸èƒ½åœ¨ `constructor` é‡Œé¢è°ƒç”¨ `this.setState()` å› ä¸º `render `è¿˜æœªæ‰§è¡Œæ„å‘³ç€ `DOM` èŠ‚ç‚¹è¿˜æœªæŒ‚è½½ã€‚

#### `getDerivedStateFromProps(nextProps, state)`

1. åœ¨è°ƒç”¨ render ä¹‹å‰è°ƒç”¨ï¼Œåœ¨åˆå§‹åŒ–å’Œåç»­æ›´æ–°éƒ½ä¼šè¢«è°ƒç”¨ã€‚
2. å±äºé™æ€å‡½æ•°ã€‚ä¸èƒ½ä½¿ç”¨ this
3. nextProps ä¸ºå³å°†æ›´æ–°çš„ propsï¼Œstate ä¸º ä¸Šä¸€ä¸ªçŠ¶æ€çš„ stateã€‚å¯ä»¥é€šè¿‡æ¯”è¾ƒ `nextProps` å’Œ `state` æ¥åŠ é™åˆ¶æ¡ä»¶ä»¥é˜²æ— ç”¨çš„`state`æ›´æ–°ã€‚

#### `render()`

1. ä¸èƒ½åœ¨ `render` ä¸­å»æ›´æ–°`setState` ï¼Œå¦åˆ™ä¼šé€ æˆæ­»å¾ªç¯å¯¼è‡´å†…å­˜å´©æºƒã€‚
2. å¿…é¡»å®ç°ï¼Œç”¨äºæ¸²æŸ“DOMï¼Œä¸”éœ€è¦è¿”å›`rectDOM` 

#### `componentDidMount()`

1. åœ¨ç»„ä»¶æŒ‚è½½ä¹‹åç«‹å³è°ƒç”¨ã€‚**å³æ’å…¥DOMæ ‘**
2. æ˜¯å‘é€ç½‘ç»œè¯·æ±‚ã€å¯ç”¨äº‹ä»¶ç›‘å¬æ–¹æ³•çš„å¥½æ—¶æœºã€‚å¯ä»¥åœ¨è¯¥é’©å­å‡½æ•°ä¸­ä½¿ç”¨ `setState()`



### 4.3 `DOM Diffing`





## 5. è„šæ‰‹æ¶

ä½¿ç”¨`create-react-app`æ¥åˆ›å»º`react`åº”ç”¨ã€‚

æ¨¡å—åŒ– - ç»„ä»¶åŒ– - å·¥ç¨‹åŒ–

æ•´ä½“æ¶æ„ï¼š`react` + `webpack` + `es6` + `eslint`

```shell
npm install -g create-react-app # å…¨å±€å®‰è£…create-react-app
create-react-app [projectName]  # åˆ›å»ºReactåº”ç”¨
```

å®‰è£…è„šæ‰‹æ¶ä¸­ä¸‹è½½ `react` `react-dom` `react-scripts` ç­‰ã€‚

 ![image-20240627200004603](https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202406272000692.png)    <img src="https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202406272009286.png" alt="image-20240627200922223" style="zoom:110%;" />     <img src="https://gitee.com/zhizhu_wlz/image-for-md/raw/master/202406272010665.png" alt="image-20240627201022613" style="zoom:90%;" />



### 5.1

### 5.2

### 5.3